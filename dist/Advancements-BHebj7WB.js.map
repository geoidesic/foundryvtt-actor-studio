{"version":3,"file":"Advancements-BHebj7WB.js","sources":["../src/components/organisms/dnd5e/Tabs/Advancements.svelte"],"sourcesContent":["<script>\n  import { onMount } from \"svelte\";\n  import { dropItemOnCharacter } from \"~/src/helpers/Utility\";\n  import { dropItemRegistry, isLevelUp, readOnlyTabs } from \"~/src/stores/index.js\";\n  import { getContext } from \"svelte\";\n\n  const doc = getContext(\"#doc\");\n\n  $: currentDrops = $dropItemRegistry?.currentProcess || [];\n  $: itemsWithoutAdvancements = currentDrops.filter(drop => \n    !drop.itemData.advancement || drop.itemData.advancement.length === 0\n  );\n\n  // $: console.log('currentDrops', currentDrops);\n  // $: console.log('itemsWithoutAdvancements', itemsWithoutAdvancements);\n  // $: console.log('$dropItemRegistry', $dropItemRegistry);\n  //- for debugging purposes only\n  // async function addAdvancement() {\n  //   window.GAS.log.d(\"currentProcess\", $dropItemRegistry.currentProcess);\n  //   let item = await fromUuid(\n  //     \"Compendium.dnd5e.subclasses.Item.sprHbe7cRg9osTzf\",\n  //   );\n  //   window.GAS.log.d(\"item\", item);\n  //   dropItemOnCharacter({\n  //     actor: $doc,\n  //     itemData: item,\n  //     isLevelUp: $isLevelUp\n  //   });\n  // }\n  \n  onMount(() => {\n    // window.GAS.log.d(\"Advancements tab mounted\");\n    Hooks.call(\"gas.captureAdvancement\", true);\n    \n    // Set read-only state for other tabs\n    readOnlyTabs.set([\"race\", \"background\", \"abilities\", \"class\"]);\n  });\n</script>\n\n<template lang=\"pug\">\n.container\n  //- button for debugging only\n  //- button.btn.btn-primary.mt-sm(on:click=\"{addAdvancement}\") Add Advancement\n  .content\n  +if('itemsWithoutAdvancements.length > 0')\n    .warnings.p-2\n      +each('itemsWithoutAdvancements as item')\n        .warning.notification {item.itemData.name} has no advancements at this level.\n\n</template>\n\n<style lang=\"sass\">\n@import \"../../../../../styles/Mixins.sass\"\n.content\n  padding: 1rem\n:global(#foundryvtt-actor-studio-pc-sheet .gas-advancements .window-header .window-title)\n  display: none\n:global(#foundryvtt-actor-studio-pc-sheet .gas-advancements .window-header .window-icon)\n  display: none\n:global(#foundryvtt-actor-studio-pc-sheet .gas-advancements .window-header .header-control)\n  display: none\n\n:global(.gas-advancements)\n  display: inline\n  text-align: left\n  \n:global(.gas-advancements nav)\n  display: flex\n\n:global(.gas-advancements .step h2)\n  border: none\n\n:global(.gas-advancements .step h4)\n  border: none\n  margin: 0\n\n// Styling for trait slots and fighting style selections\n:global(.gas-advancements .step ol.trait-slots)\n  @include inset\n  font-size: 1rem\n\n:global(.gas-advancements .step ol.trait-slots li.trait-slot)\n  margin: 2px 0\n  align-items: center\n\n:global(.theme-dark .gas-advancements .step ol.trait-slots )\n  border: 1px solid var(--dnd5e-color-gold)\n\n:global(.gas-advancements .step ol.trait-slots li.trait-slot label)\n  display: flex\n  align-items: center\n  position: relative\n  padding-left: 30px  /* Make room for the checkbox */\n\n:global(.gas-advancements .step ol.trait-slots li.trait-slot label::before)\n  content: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" fill=\"currentColor\" height=\"20\" viewBox=\"0 0 24 24\"><path d=\"M9 16.17l-3.5-3.5 1.17-1.17L9 13.83l6.33-6.33L16.5 8.5 9 16.17zM5 5v14h14V5H5z\"/></svg>') /* SVG icon */\n  position: absolute\n  left: 0\n  top: 50%\n  transform: translateY(-35%) scale(1.5)\n  margin-right: 5px\n\n// Dark theme override for checkbox visibility\n:global(.theme-dark .gas-advancements .step ol.trait-slots li.trait-slot label::before)\n  content: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" fill=\"%23ffffff\" height=\"20\" viewBox=\"0 0 24 24\"><path d=\"M9 16.17l-3.5-3.5 1.17-1.17L9 13.83l6.33-6.33L16.5 8.5 9 16.17zM5 5v14h14V5H5z\"/></svg>') /* White SVG for dark theme */\n\n:global(.theme-dark .GAS.application input[type=\"checkbox\"]::before)\n  // color: var(--dnd5e-color-gold)\n\n:global(.gas-advancements .step ol.trait-slots li.trait-slot a)\n  text-align: right\n\n// General styling for all lists in advancements\n:global(.gas-advancements .step ul)\n  padding: 0\n\n:global(.gas-advancements .step .pill-lg)\n  margin: 0.5rem 0\n  border: 1px solid var(--dnd5e-color-gold)\n  padding: 0.5rem 1rem\n  cursor: pointer\n  background-color: #000\n  border-radius: var(--border-radius)\n  color: var(--dnd5e-color-gold)\n  display: flex\n  justify-content: space-between\n  align-items: center\n  \n:global(.gas-advancements .step .pill-lg img)\n  max-height: 30px\n:global(.gas-advancements .step .pill-lg[data-action=\"browse\"]:after)\n  content: \">\"\n\n// Fighting style specific styles\n:global(.gas-advancements form[data-type=\"ItemChoice\"] ol),\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] ul.icon-list)\n  @include inset\n  font-size: 1rem\n  padding: 0\n  margin: 0\n  list-style-type: none\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] li),\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] ul.icon-list li)\n  display: flex\n  align-items: center\n  margin: 2px 0\n  padding: 0\n  border: 1px solid #ccc\n  border-radius: 4px\n  height: 30px\n  overflow: hidden\n\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] ul.icon-list li .flexrow)\n  display: flex\n  align-items: center\n  width: 100%\n  height: 100%\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] li label),\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] ul.icon-list li .flex2)\n  display: flex\n  align-items: center\n  padding: 0 8px\n  flex-grow: 1\n  height: 100%\n  font-size: 0.9rem\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] li input[type=\"radio\"]),\n:global(.gas-advancements form[data-type=\"ItemChoice\"] li input[type=\"checkbox\"])\n  margin-right: 8px\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] .item-image),\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] .image img.icon)\n  width: 30px\n  height: 30px\n  margin-right: 8px\n  object-fit: cover\n  background-size: cover\n  background-position: center\n  background-repeat: no-repeat\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] .choice-hint),\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] .hint)\n  font-style: italic\n  font-size: 0.9em\n  margin: 4px 0\n  padding-left: 5px\n\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] .flexrow)\n  display: flex\n  align-items: center\n  margin-bottom: 4px\n\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] h3)\n  margin: 0\n  padding: 0\n  font-size: 1rem\n\n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] ul.icon-list)\n  margin-top: 4px\n  \n:global(.gas-advancements .advancement[data-type=\"ItemChoice\"] .flex0.image)\n  flex: 0 0 30px\n  height: 30px\n  display: flex\n  align-items: center\n  justify-content: center\n\n:global(.theme-dark .gas-advancements form[data-type=\"ItemChoice\"] .drop-target .item-name)\n  background: black\n  border: 1px solid var(--dnd5e-color-gold)\n  margin-bottom: 0.3rem\n:global(.theme-dark .GAS .gas-advancements .item-name )\n  border: 1px solid var(--dnd5e-color-gold)\n  background: black\n:global(.theme-dark .GAS .gas-advancements .item-name h4 a)\n  color: var(--dnd5e-color-gold)\n\n\n:global(.gas-advancements .header-button.control.close)\n  display: none\n\n// Ability scores styling\n:global(.gas-advancements .step ul.ability-scores li)\n  @include inset(var(--color-border-light), 0.2rem)\n  display: flex\n  gap: 0.5rem\n  align-items: center\n  font-size: 1rem\n\n:global(.gas-advancements .step ul.ability-scores li label)\n  flex-grow: 1\n\n:global(.gas-advancements .step ul.ability-scores li input)\n  width: 40px\n  text-align: center\n\n:global(.gas-advancements .step ul.ability-scores li a)\n  text-align: right\n\n:global(.gas-advancements .step ul.ability-scores li .delta)\n  min-width: 35px\n\n:global(.gas-advancements .step ul li)\n  border: 1px solid #ccc\n  padding: 0\n  margin: 0.6rem 0\n  list-style-type: none\n\n  :global(.gas-advancements flexrow)\n    display: flex\n    align-items: center\n\n:global(.gas-advancements form[data-type=\"ItemGrant\"])\n  min-height: 20px\n  padding: 0\n\n:global(.gas-advancements form[data-type=\"ItemGrant\"] .item-name)\n  @include inset\n  font-size: 1.5rem\n  padding: 0\n  margin: 0.5rem 0\n  border-radius: 4px\n\n:global(.gas-advancements form[data-type=\"ItemGrant\"] .item-name h4)\n  padding: 0\n  margin: 0\n\n:global(.gas-advancements form[data-type=\"ItemGrant\"] .item-name label)\n  padding: 0\n  margin: 6px 0 0 0\n\n:global(.gas-advancements form[data-type=\"ItemGrant\"] .item-image)\n  height: 40px\n  width: 40px\n  max-width: 40px\n  margin-right: 8px \n  background-size: contain\n  background-repeat: no-repeat\n  flex: 0\n  min-width: 40px\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] .drop-target .item-name)\n  @include inset\n  font-size: 1.5rem\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] .drop-target .item-name label)\n  padding: 0\n  margin: 6px 0 0 0\n\n:global(.gas-advancements form[data-type=\"ItemChoice\"] .drop-target .item-image)\n  height: 40px\n  width: 40px\n  background-size: contain\n  background-repeat: no-repeat\n  flex: 0\n  min-width: 40px\n  \n:global(.gas-advancements form[data-type=\"ItemChoice\"] .drop-target input[type=\"checkbox\"])\n  text-align: right\n  margin-right: 0.5rem\n\n:global(.gas-advancements form[data-type=\"AbilityScoreImprovement\"] .ability-scores li)\n  display: grid\n  grid-template: \"label label label\" \"minus value plus\" \"minus delta plus\"\n  align-items: center\n\n:global(.gas-advancements form[data-type=\"AbilityScoreImprovement\"] .ability-scores li input)\n  width: unset\n  text-align: unset\n  padding-left: 0.6rem\n\n:global(.step form[data-type=\"HitPoints\"] .rolls)\n    display: grid\n    grid-template-columns: 50% 1fr 1fr\n    align-items: center\n    gap: 2px\n\n:global(.gas-advancements .gas-header)\n  border-bottom: 1px solid var(--color-border-light)\n  \n:global(.gas-advancements .gas-content)\n  padding: 0.5rem\n\n:global(.warning.notification)\n  background: rgba(var(--color-warning-rgb), 0.1)\n  border: 1px solid var(--color-warning)\n  border-radius: 4px\n  padding: 0.5rem\n  margin-bottom: 0.5rem\n\n:global(.gas-advancements .header-control)\n  display: none\n\n:global(.gas-advancements .dnd5e.advancement select)\n  color: unset\n\n:global(.gas-advancements .window-header h2)\n  margin: 0.2rem 0\n\n:global(.theme-dark .gas-advancements .content-link)\n  color: var(--dnd5e-color-gold)\n\n.warnings\n  margin-top: 1rem\n</style>\n"],"names":["ctx"],"mappings":";;;;;;;;;;IAuC4H,IAAwB,CAAA;AAAA,EAAA;;iCAA7B,QAAI,KAAA,GAAA;;;;;;;;;;;;AAAhC,aAA8K,QAAA,KAAA,MAAA;;;;;;;;;;;;UAA7IA,KAAwB,CAAA;AAAA,QAAA;;mCAA7B,QAAI,KAAA,GAAA;;;;;;;;;;;;;wCAAJ;AAAA;;;;;;;;;;;;;;IAAyE,IAAI,CAAA,EAAC,SAAS,OAAI;AAAA;;;;;;;gBAAC,qCAAmC;;;;AAAzF,aAA+F,QAAA,KAAA,MAAA;;;;;;;MAA5DA,KAAI,CAAA,EAAC,SAAS,OAAI,IAAA,UAAA,IAAA,QAAA;AAAA;;;;;;;;;;;;;IAA3J,IAAwB,CAAA,EAAC,SAAS,KAAC,gBAAA,GAAA;AAAA;;;;;;;;;;AAA1F,aAAmR,QAAA,MAAA,MAAA;AAA5P,aAA2B,MAAA,IAAA;;;;;;QAAKA,KAAwB,CAAA,EAAC,SAAS;AAAA,QAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAjC5E,aAAW,MAAM;AAwB7B,UAAO,MAAA;AAEL,UAAM,KAAK,0BAA0B,IAAI;AAGzC,iBAAa,IAAG,CAAE,QAAQ,cAAc,aAAa,OAAO,CAAA;AAAA;;;;AA3B7D,mBAAA,GAAE,eAAe,mBAAmB,kBAAc,CAAA,CAAA;AAAA;;;AAClD,mBAAA,GAAE,2BAA2B,aAAa,OAAO,UAAI,CACnD,KAAK,SAAS,eAAe,KAAK,SAAS,YAAY,WAAW,CAAA,CAAA;AAAA;;;;;;;;;;"}