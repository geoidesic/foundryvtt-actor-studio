{"version":3,"file":"Equipment-Byii-DoJ.js","sources":["../src/components/molecules/dnd5e/StartingGold.svelte","../src/components/atoms/button/IconButton.svelte","../src/components/molecules/dnd5e/v4/StartingGold.svelte","../src/components/atoms/dnd5e/2024/StartingEquipmentGroups.svelte","../src/components/atoms/dnd5e/2014/StartingEquipmentGroups.svelte","../src/components/molecules/dnd5e/StartingEquipment.svelte","../src/components/molecules/dnd5e/EquipmentSelection/EquipmentSelectorDetail.svelte","../src/components/molecules/dnd5e/EquipmentSelection/PlannedInventory.svelte","../src/components/organisms/dnd5e/Tabs/Equipment.svelte"],"sourcesContent":["<script>\n  import { localize as t } from \"~/src/helpers/Utility\";\n  import { getContext, onDestroy, onMount } from \"svelte\";\n  import { goldRoll } from \"~/src/stores/storeDefinitions\";\n  import { MODULE_ID } from \"~/src/helpers/constants\";\n  import { writable } from 'svelte/store';\n\n  export let characterClass;\n  export let disabled = false;\n\n  let formula = \"\";\n\n  $: {\n    if (characterClass?.system?.wealth) {\n      formula = characterClass.system.wealth;\n      // If formula doesn't contain 'd', set goldRoll directly\n      if (!formula.includes('d')) {\n        $goldRoll = parseInt(formula) || 0;\n      }\n    } else {\n      // Use default gold dice from settings if no class-specific formula\n      formula = game.settings.get(MODULE_ID, \"defaultGoldDice\") || \"5d4 * 10\";\n    }\n  }\n\n  // Derive hasRolled from the goldRoll store value\n  $: hasRolled = $goldRoll > 0;\n\n  async function rollGold() {\n    if (disabled) return;\n    const roll = await new Roll(formula).evaluate();\n    const className = characterClass?.name || \"Character\";\n    const flavor = `Rolling starting gold for ${className}`;\n    roll.toMessage({\n      flavor,\n      speaker: ChatMessage.getSpeaker()\n    }, {rollMode: game.settings.get('core', 'rollMode')});\n\n    $goldRoll = roll.total;\n  }\n\n  export function resetGoldRoll() {\n    goldRoll.set(0);\n  }\n</script>\n\n<template lang=\"pug\">\n  section.starting-gold\n    .flexrow\n      +if(\"!disabled\")\n        .flex0.required(class=\"{!hasRolled ? 'active' : ''}\") *\n      .flex3\n        h2.left {t('Equipment.Gold')}\n    \n    .flexcol.gold-section.gap-10(class=\"{disabled ? 'disabled' : ''}\")\n      +if(\"!hasRolled\")\n        .roll-gold.flexcol.gap-10\n          .flexrow.left.gap-4\n            .flex1 Formula: \n            .flex1.badge.center {formula}\n          .flexrow\n            .flex1\n            .flex0.right.controls(class=\"{hasRolled || disabled ? '' : 'active'}\" alt=\"Roll\" on:click!=\"{rollGold}\")\n              i.fas.fa-dice\n          \n      +if(\"!disabled\")\n        .flexrow.left.justify-flexrow-vertical\n          .flex3 \n            +if(\"hasRolled\")\n              .result.final-gold-result\n                .flexrow.justify-flexrow-vertical.no-wrap\n                  .flex0.relative.icon\n                    i.fas.fa-coins\n                  .flex2.left\n                    span.value {$goldRoll} gp\n</template>\n\n<style lang=\"sass\">\n  @import \"../../../../styles/Mixins.sass\"\n  .badge\n    +badge()\n  .starting-gold\n    background: rgba(0, 0, 0, 0.2)\n    border-radius: var(--border-radius)\n    padding: 0.5rem\n\n  .gold-section\n    border-radius: var(--border-radius)\n    .roll-gold\n      padding: 0.5rem\n    &:not(.disabled)\n      border: 1px solid var(--dnd5e-color-gold)\n      background: rgba(0, 0, 0, 0.2)\n      background: #000000\n      color: var(--dnd5e-color-gold)\n\n\n  .formula\n    .label\n      color: var(--color-text-dark-secondary)\n      margin-right: 0.5rem\n    .value\n      font-family: monospace\n\n  .controls\n    cursor: pointer\n    min-width: 24px\n    font-size: 1rem\n    background-color: rgba(0, 0, 0, 0.1)\n    padding: 2px 1px 0px 0px\n    visibility: hidden\n    border: 1px solid var(--color-positive)\n    border-radius: 4px\n    color: var(--color-positive)\n    &:hover\n      cursor: pointer\n      background-color: rgba(140, 90, 0, 0.2)\n    &.active\n      visibility: visible\n      border: 1px solid var(--dnd5e-color-gold)\n      color: var(--dnd5e-color-gold)\n      animation: pulse 1s infinite\n\n  .result\n    &.final-gold-result\n      padding: 0 0.5rem 0.5rem 0.5rem\n      border-radius: var(--border-radius)\n      // border: 1px solid var(--dnd5e-color-gold)\n      background: #000000\n      color: var(--dnd5e-color-gold)\n      margin-top: 0.5rem\n      \n      .icon\n        min-width: 32px\n        max-height: 32px\n        margin-right: 0.5rem\n        display: flex\n        align-items: center\n        justify-content: center\n        \n        i\n          color: var(--dnd5e-color-gold)\n          font-size: 1.2em\n      \n      .label\n        color: var(--dnd5e-color-gold)\n        margin-right: 0.5rem\n      \n      .value\n        color: var(--dnd5e-color-gold)\n        font-weight: bold\n      font-weight: bold\n</style> ","<script>\n  import preventDefault from \"~/src/helpers/svelte-actions/PreventDefault.js\";\n\n  export let icon = void 0;\n  export let disabled = false;\n</script>\n\n<button on:click on:mousedown={preventDefault} {disabled}>\n  <div><i class={icon} /></div>\n</button>\n\n<style lang=\"scss\">\n  @import \"../../../../styles/Mixins.sass\";\n  button {\n    @include icon-button;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    clip-path: var(--tjs-icon-button-clip-path, none);\n    transform-style: preserve-3d;\n  }\n\n  button:hover {\n    background: radial-gradient(var(--button-background-highlight), var(--button-background));\n    clip-path: var(--tjs-icon-button-clip-path-hover, var(--tjs-icon-button-clip-path, none));\n  }\n</style>\n","<script>\n  import { localize as t } from \"~/src/helpers/Utility\";\n  import { getContext, onDestroy, onMount } from \"svelte\";\n  import { goldRoll } from \"~/src/stores/storeDefinitions\";\n  import { goldChoices, setClassGoldChoice, setBackgroundGoldChoice, clearGoldChoices, totalGoldFromChoices } from \"~/src/stores/goldChoices\";\n  import { parsedEquipmentGold, equipmentGoldOptions, setEquipmentGoldChoice, clearEquipmentGoldChoices } from \"~/src/stores/equipmentGold\";\n  import { MODULE_ID } from \"~/src/helpers/constants\";\n  import { clearEquipmentSelections } from \"~/src/stores/equipmentSelections\";\n  import IconButton from \"~/src/components/atoms/button/IconButton.svelte\";\n  \n  export let characterClass;\n  export let background;\n\n\n  let classGoldOnly = 0;\n  let classGoldWithEquipment = 0;\n  let backgroundGoldOnly = 0;\n  let backgroundGoldWithEquipment = 0;\n\n  export const scrape2024SecondaryGoldAward = (item) => {\n    // Extract awards using a regular expression\n    const awards = item.system?.description?.value?.match(/\\[\\[\\/award (\\d+)GP\\]\\]/g);\n    \n    if (awards) {\n      const extractedAwards = awards.map(award => parseInt(award.match(/(\\d+)GP/)[1], 10));\n      const max = Math.max(...extractedAwards);\n      const min = Math.min(...extractedAwards);\n      \n      return {max, min};\n    } else {\n      console.log('No awards found.');\n      return 0\n    }\n  }\n  \n  // @deprecated: not accurate.\n  // Function to extract gold value from description text\n  export function scrapeGoldFromBackground(background) {\n    // Look for pattern \", X GP;\" where X is a number\n    // const match = background.system.description?.value.match(/,\\s*(\\d+)\\s*GP;/i);\n    // Match all occurrences of digits followed by a space and 'GP'\n    const matches = background.system.description?.value.match(/(\\d+)\\s*GP/gi);\n    // Extract the number values as integers\n    const goldValues = matches ? matches.map(m => parseInt(m.match(/\\d+/)[0], 10)) : [];\n    window.GAS.log.d(\"scrapeGoldFromBackground goldValues\", goldValues);\n    if(goldValues) {\n      const max = Math.max(...goldValues);\n      const min = Math.min(...goldValues);\n      \n      return {max, min};\n    } else {\n      console.warn('No gold value found in description.');\n      return 0;\n    }\n\n  }\n\n  $: {\n    if (characterClass) {\n      // Gold only amount comes from system.wealth\n      classGoldOnly = characterClass.system.wealth || 0;\n      // With equipment amount: use parsed equipment gold if available, otherwise fall back to scraping\n      const classGold = $parsedEquipmentGold.fromClass;\n      if (classGold.goldOptions.length > 0 && !classGold.hasVariableGold) {\n        classGoldWithEquipment = classGold.goldOptions[0].goldAmount;\n      } else {\n        classGoldWithEquipment = scrape2024SecondaryGoldAward(characterClass)?.min || 0;\n      }\n    }\n    \n    if (background) {\n      // Gold only amount comes from system.wealth\n      backgroundGoldOnly = background.system.wealth || 0;\n      // With equipment amount: use parsed equipment gold if available, otherwise fall back to scraping\n      const backgroundGold = $parsedEquipmentGold.fromBackground;\n      if (backgroundGold.goldOptions.length > 0 && !backgroundGold.hasVariableGold) {\n        backgroundGoldWithEquipment = backgroundGold.goldOptions[0].goldAmount;\n      } else if (backgroundGold.hasVariableGold) {\n        // For variable gold, use 0 as placeholder since user will select specific amount\n        backgroundGoldWithEquipment = 0;\n      } else {\n        // Fall back to scraping only if parsing found nothing\n        backgroundGoldWithEquipment = scrapeGoldFromBackground(background)?.min || 0;\n      }\n    }\n  }\n\n  function handleClassChoice(choice) {\n    // Check if this class has variable gold options\n    const classGold = $parsedEquipmentGold.fromClass;\n    \n    if (choice === 'equipment' && classGold.hasVariableGold) {\n      // For variable gold, set base gold to 0 since amount comes from equipment selection\n      const goldValue = 0;\n      setClassGoldChoice(choice, goldValue);\n    } else {\n      // Standard behavior for fixed gold amounts\n      const goldValue = choice === 'equipment' ? classGoldWithEquipment : classGoldOnly;\n      setClassGoldChoice(choice, goldValue);\n      \n      // For equipment choice, set the equipment gold amount from parsed data\n      if (choice === 'equipment') {\n        const equipmentGoldAmount = classGold.standardEquipmentGold || classGoldWithEquipment || 0;\n        setEquipmentGoldChoice('fromClass', 'default', equipmentGoldAmount);\n      } else if (choice === 'gold') {\n        // Clear equipment gold when choosing gold only\n        setEquipmentGoldChoice('fromClass', null, 0);\n      }\n    }\n  }\n\n  function handleBackgroundChoice(choice) {\n    console.log('🔧 handleBackgroundChoice called:', { choice, showEditButton });\n    \n    // Check if this background has variable gold options\n    const backgroundGold = $parsedEquipmentGold.fromBackground;\n    console.log('🔧 backgroundGold:', backgroundGold);\n    \n    if (choice === 'equipment' && backgroundGold.hasVariableGold) {\n      // For variable gold, set base gold to 0 since amount comes from equipment selection\n      const goldValue = 0;\n      console.log('🔧 Variable gold path - setting goldValue:', goldValue);\n      setBackgroundGoldChoice(choice, goldValue);\n    } else {\n      // Standard behavior for fixed gold amounts\n      const goldValue = choice === 'equipment' ? backgroundGoldWithEquipment : backgroundGoldOnly;\n      console.log('🔧 Standard path - goldValue:', goldValue, 'backgroundGoldWithEquipment:', backgroundGoldWithEquipment);\n      setBackgroundGoldChoice(choice, goldValue);\n      \n      // For equipment choice, set the equipment gold amount from parsed data\n      if (choice === 'equipment') {\n        const equipmentGoldAmount = backgroundGold.standardEquipmentGold || backgroundGoldWithEquipment || 0;\n        console.log('🔧 Setting equipment gold amount:', equipmentGoldAmount);\n        setEquipmentGoldChoice('fromBackground', 'default', equipmentGoldAmount);\n      } else if (choice === 'gold') {\n        // Clear equipment gold when choosing gold only\n        setEquipmentGoldChoice('fromBackground', null, 0);\n      }\n    }\n  }\n\n  function handleEquipmentGoldChoice(source, choice, goldAmount) {\n    if (showEditButton) return;\n    setEquipmentGoldChoice(source, choice, goldAmount);\n  }\n\n  function makeClassChoiceHandler(choice) {\n    return function classChoiceHandler() {\n      handleClassChoice(choice);\n    };\n  }\n\n  function makeBackgroundChoiceHandler(choice) {\n    return function backgroundChoiceHandler() {\n      handleBackgroundChoice(choice);\n    };\n  }\n\n  function handleEdit() {\n    clearGoldChoices();\n    clearEquipmentSelections();\n    clearEquipmentGoldChoices();\n  }\n\n  $: classChoice = $goldChoices.fromClass.choice;\n  $: backgroundChoice = $goldChoices.fromBackground.choice;\n  \n  // Debug the gold calculation components\n  $: {\n    console.log('🔧 GOLD CALCULATION DEBUG:', {\n      classGoldValue: $goldChoices.fromClass.goldValue,\n      backgroundGoldValue: $goldChoices.fromBackground.goldValue, \n      classEquipmentGold: $equipmentGoldOptions.fromClass.currentGoldAmount,\n      backgroundEquipmentGold: $equipmentGoldOptions.fromBackground.currentGoldAmount,\n      goldChoices: $goldChoices,\n      equipmentGoldOptions: $equipmentGoldOptions\n    });\n  }\n  \n  // Use the centralized totalGoldFromChoices derived store that includes variable equipment gold\n  $: totalGold = $totalGoldFromChoices;\n  $: hasChoices = characterClass || background;\n  $: isComplete = classChoice && backgroundChoice;\n  $: showEditButton = hasChoices && classChoice && backgroundChoice;\n  \n  // Enhanced checks for gold completion - selecting equipment choice is sufficient, even for variable gold\n  $: classGoldComplete = classChoice === 'gold' || classChoice === 'equipment';\n  $: backgroundGoldComplete = backgroundChoice === 'gold' || backgroundChoice === 'equipment';\n</script>\n\n<template lang=\"pug\">\nsection.starting-gold\n  .flexrow\n    +if(\"!showEditButton\")\n      .flex0.required(class!=\"{!classChoice || !backgroundChoice ? 'active' : ''}\")\n        span *\n    .flex3\n      h2.left\n        span {t('Equipment.Gold')}\n    +if(\"showEditButton\")\n      .flex0.right\n        IconButton.option(\n          on:click!=\"{handleEdit}\"\n          icon=\"fas fa-pencil\"\n        )\n  \n  .flexcol.gold-section.gap-10(class!=\"{showEditButton ? 'disabled' : ''}\")\n    \n    +if(\"background\")\n      .equipment-group\n        .flexrow.left\n          .flex.group-label {background.name} Options\n        .options\n          button.option(\n            class!=\"{backgroundChoice === 'equipment' ? 'selected' : ''} {showEditButton ? 'disabled' : ''}\"\n            on:mousedown!=\"{makeBackgroundChoiceHandler('equipment')}\"\n            disabled!=\"{showEditButton}\"\n          )\n            .flexrow.justify-flexrow-vertical.no-wrap\n              .flex0.relative.icon\n                i.fas.fa-sack-dollar\n              .flex2.left.name\n                +if(\"$parsedEquipmentGold.fromBackground.hasVariableGold\")\n                  span {t('Equipment.Label')} + variable gp\n                  +else()\n                    span {t('Equipment.Label')} + {backgroundGoldWithEquipment} gp\n          button.option(\n            class!=\"{backgroundChoice === 'gold' ? 'selected' : ''} {showEditButton ? 'disabled' : ''}\"\n            on:mousedown!=\"{makeBackgroundChoiceHandler('gold')}\"\n            disabled!=\"{showEditButton}\"\n          )\n            .flexrow.justify-flexrow-vertical.no-wrap\n              .flex0.relative.icon\n                i.fas.fa-coins\n              .flex2.left.name\n                span {backgroundGoldOnly} gp\n    \n    +if(\"characterClass\")\n      .equipment-group\n        .flexrow.left\n          .flex.group-label {characterClass.name} Options\n        .options\n          button.option(\n            class!=\"{classChoice === 'equipment' ? 'selected' : ''} {showEditButton ? 'disabled' : ''}\"\n            on:mousedown!=\"{makeClassChoiceHandler('equipment')}\"\n            disabled!=\"{showEditButton}\"\n          )\n            .flexrow.justify-flexrow-vertical.no-wrap\n              .flex0.relative.icon\n                i.fas.fa-sack-dollar\n              .flex2.left.name\n                +if(\"$parsedEquipmentGold.fromClass.hasVariableGold\")\n                  span {t('Equipment.Label')} + variable gp\n                  +else()\n                    span {t('Equipment.Label')} + {classGoldWithEquipment} gp\n          button.option(\n            class!=\"{classChoice === 'gold' ? 'selected' : ''} {showEditButton ? 'disabled' : ''}\"\n            on:mousedown!=\"{makeClassChoiceHandler('gold')}\"\n            disabled!=\"{showEditButton}\"\n          )\n            .flexrow.justify-flexrow-vertical.no-wrap\n              .flex0.relative.icon\n                i.fas.fa-coins\n              .flex2.left.name\n                span {classGoldOnly} gp\n    \n\n    \n    +if(\"classGoldComplete && backgroundGoldComplete\")\n      .equipment-group.final-gold\n        .flexrow.left.result\n          .flex0.relative.icon\n            i.fas.fa-coins\n          .flex2.left\n            .label\n              span Total Gold:\n            .value\n              span {totalGold} gp\n</template>\n\n<style lang=\"sass\">\n@import \"../../../../../styles/Mixins.sass\"\n.badge\n  +badge()\n.starting-gold\n  background: rgba(0, 0, 0, 0.2)\n  border-radius: var(--border-radius)\n  padding: 0.5rem\n\n.gold-section\n  padding: 0.5rem\n  border-radius: var(--border-radius)\n  &:not(.disabled)\n    border: 1px solid var(--dnd5e-color-gold)\n    background: rgba(0, 0, 0, 0.2)\n    background: #000000\n    color: var(--dnd5e-color-gold)\n\n.equipment-group\n  margin-bottom: 0.75rem\n  margin-right: 0.2rem\n  padding: 0.5rem\n  border-radius: var(--border-radius)\n  background: rgba(0, 0, 0, 0.2)\n  \n  &:last-child\n    margin-bottom: 0\n\n  &.final-gold\n    border: 1px solid var(--dnd5e-color-gold)\n    background: #000000\n    color: var(--dnd5e-color-gold)\n    \n    .icon\n      min-width: 32px\n      max-height: 32px\n      margin-right: 0.5rem\n      display: flex\n      align-items: center\n      justify-content: center\n      \n      i\n        color: var(--dnd5e-color-gold)\n        font-size: 1.2em\n    \n    .label\n      color: var(--dnd5e-color-gold)\n      margin-right: 0.5rem\n    \n    .value\n      color: var(--dnd5e-color-gold)\n      font-weight: bold\n\n  &.variable-gold\n    border: 1px solid var(--color-text-highlight)\n    background: rgba(0, 0, 0, 0.3)\n    \n    .group-label\n      color: var(--color-text-highlight)\n      font-weight: bold\n\n.group-label\n  display: block\n  font-size: 1em\n  color: var(--dnd5e-color-gold)\n  margin-bottom: 0.5rem\n  font-style: italic\n\n.options\n  display: grid\n  grid-template-columns: repeat(1, 1fr)\n  gap: 0.2rem\n\nbutton.option\n  color: white\n.option\n  display: flex\n  padding: 0.3rem 0.5rem\n  border: 1px solid rgba(255, 255, 255, 0.1)\n  border-radius: 4px\n  background: rgba(0, 0, 0, 0.4)\n  color: var(--li-background-color)\n  cursor: pointer\n  transition: all 0.5s ease\n  \n  &:hover:not(.disabled)\n    background: var(--dnd5e-color-gold)\n    border-color: rgba(255, 255, 255, 0.2)\n\n    .icon\n      i\n        color: var(--dnd5e-color-dark)\n    span\n      color: var(--dnd5e-color-dark)\n  &.selected\n    background: rgba(0, 0, 0, 0.8)\n    border-color: #b59e54\n    box-shadow: 0 0 10px rgba(181, 158, 84, 0.2)\n    &:hover:not(.disabled)\n      background: rgba(0, 0, 0, 0.8)\n      border-color: #b59e54\n      box-shadow: 0 0 10px rgba(181, 158, 84, 0.2)\n      span\n        color: #fff\n      .icon\n        i\n          color: #fff\n\n  &.disabled\n    cursor: not-allowed\n    opacity: 0.5\n    transition: opacity 0.5s ease\n\n  &.confirm\n    background: var(--color-positive)\n    border-color: var(--color-positive)\n    color: white\n    &:hover\n      background: var(--color-positive-dark)\n\n.icon\n  min-width: 32px\n  max-height: 32px\n  margin-right: 0.2rem\n  display: flex\n  align-items: center\n  justify-content: center\n  i\n    font-size: 1.2em\n    color: var(--dnd5e-color-gold)\n\n.name\n  font-size: smaller\n  line-height: 2rem\n\n.description\n  font-size: 0.8em\n  color: rgba(255, 255, 255, 0.7)\n  font-style: italic\n  text-align: right\n  white-space: nowrap\n  overflow: hidden\n  text-overflow: ellipsis\n  max-width: 200px\n\n.mt-sm\n  margin-top: 0.5rem\n</style> ","<script>\n  import { getEquipmentIcon, getEquipmentItemClasses, getOptionClasses, handleSelection, isOptionDisabled, isGroupFromSource, isGroupEditable, matchingGroupsForSource } from \"~/src/stores/equipmentSelections\";\n  import IconButton from \"~/src/components/atoms/button/IconButton.svelte\";\n\n  export let equipmentBySource;\n  export let sortedGroups;\n  export let handleEditGroup;\n  export let disabled;\n  export let selectedItems;\n  export let handleVariableGoldChoice;\n  export let parsedEquipmentGold;\n\n  // Helper function to get gold amount for a specific item within an equipment group\n  function getGoldAmountForItem(group, sourceGroup, item) {\n    if (!parsedEquipmentGold || !sourceGroup.source || group.type !== 'choice') return null;\n    \n    const goldData = sourceGroup.source === 'class' ? parsedEquipmentGold.fromClass : parsedEquipmentGold.fromBackground;\n    if (!goldData?.hasVariableGold || !goldData.goldOptions?.length) return null;\n    \n    // Check if this group belongs to the source\n    if (!isGroupFromSource(group, sourceGroup.equipment)) return null;\n    \n    // Find the index of this item within the group's items\n    const itemIndex = group.items.findIndex(groupItem => groupItem._id === item._id);\n    if (itemIndex === -1) return null;\n    \n    // Map item index to gold choice (A=0, B=1, C=2, etc.)\n    if (itemIndex < goldData.goldOptions.length) {\n      const choiceLetter = String.fromCharCode(65 + itemIndex); // A=65, B=66, C=67\n      const goldOption = goldData.goldOptions.find(opt => opt.choice === choiceLetter);\n      return goldOption?.goldAmount || null;\n    }\n    \n    return null;\n  }\n\n  // Handle variable gold choice for equipment selection\n  function handleEquipmentSelection(group, sourceGroup, item) {\n    const goldAmount = getGoldAmountForItem(group, sourceGroup, item);\n    handleSelection(disabled, group.id, item);\n    \n    if (goldAmount && handleVariableGoldChoice) {\n      const source = sourceGroup.source === 'class' ? 'fromClass' : 'fromBackground';\n      const choice = String.fromCharCode(65 + group.items.findIndex(groupItem => groupItem._id === item._id));\n      handleVariableGoldChoice(source, choice, goldAmount);\n    }\n  }\n</script>\n\n<template lang=\"pug\">\ndiv\n  +each(\"equipmentBySource as sourceGroup\")\n    +if(\"sourceGroup.equipment?.length\")\n      .equipment-source-section.ml-md\n        h3.source-header.left {sourceGroup.label} Equipment\n        +if(\"!matchingGroupsForSource(sortedGroups, sourceGroup).length\") \n          p.left None selected\n        //- Process each group within this source\n        +each(\"sortedGroups as group\")\n          +if(\"(group.completed || group.inProgress) && isGroupFromSource(group, sourceGroup.equipment)\")\n            .equipment-group\n              .flexrow.justify-flexrow-vertical.no-wrap\n                .flex3.left\n                  +if(\"group.type === 'choice'\")\n                    +if(\"group.completed\")\n                      span.group-label Completed:\n                      +else()\n                        span.group-label Choose one...\n                +if(\"isGroupEditable(group)\")\n                  .flex0.right\n                    IconButton.option(\n                      on:click=\"{handleEditGroup(group.id)}\"\n                      disabled=\"{disabled}\"\n                      icon=\"fas fa-pencil\"\n                    )\n              .options\n                +if(\"group.type === 'standalone'\")\n                  .equipment-group\n                    .flexrow.justify-flexrow-vertical.no-wrap\n                      .flex3.left\n                        +if(\"!group.completed\")\n                          span.group-label All of the following:\n                    +if(\"group.items[0].type === 'AND'\")\n                      +each(\"group.items[0].children as item\")\n                        .equipment-item.option(\n                          class=\"{getEquipmentItemClasses(group, item, disabled)}\"\n                          on:click!=\"{item.type !== 'linked' ? handleSelection(disabled, group.id, item) : null}\"\n                        )\n                          .flexrow.justify-flexrow-vertical.no-wrap\n                            .flex0.relative.icon\n                              img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                            .flex2.left.name.black-link\n                              span {@html item.label}\n                      +else()\n                        +each(\"group.items as item\")\n                          .equipment-item.option(\n                            class=\"{getEquipmentItemClasses(group, item, disabled)}\"\n                            on:click!=\"{item.type !== 'linked' ? handleSelection(disabled, group.id, item) : null}\"\n                          )\n                            .flexrow.justify-flexrow-vertical.no-wrap\n                              .flex0.relative.icon\n                                img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                              .flex2.left.name.black-link\n                                span {@html item.label}\n                  +else()\n                    +each(\"group.items as item\")\n                      .equipment-item.option(\n                        class=\"{getOptionClasses(disabled, group, item)}\"\n                        on:click!=\"{() => handleEquipmentSelection(group, sourceGroup, item)}\"\n                      )\n                        .flexrow.justify-flexrow-vertical.no-wrap\n                          .flex0.relative.icon\n                            img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                          .flex2.left.name.black-link\n                            span {@html item.label}\n                            +if(\"group.selectedItemId === item._id && $selectedItems[group.id]\")\n                              span.selected-name &nbsp;({$selectedItems[group.id].name})\n                            //- Add gold amount for variable gold choice items\n                            +if(\"getGoldAmountForItem(group, sourceGroup, item)\")\n                              span.gold-amount(style=\"color: var(--dnd5e-color-gold); font-weight: bold; margin-left: 10px;\") + {getGoldAmountForItem(group, sourceGroup, item)} GP\n</template>\n\n<style lang=\"scss\">\n  @import '../../../../../styles/features/starting-equipment.sass';\n</style>\n  ","<script>\n  import { getEquipmentIcon, getEquipmentItemClasses, getOptionClasses, handleSelection, isOptionDisabled, isGroupEditable } from \"~/src/stores/equipmentSelections\";\n  import IconButton from \"~/src/components/atoms/button/IconButton.svelte\";\n\n  export let equipmentBySource;\n  export let sortedGroups;\n  export let handleEditGroup;\n  export let disabled;\n  export let selectedItems;\n</script>\n\n<template lang=\"pug\">\ndiv\n  +each(\"sortedGroups as group\")\n    +if(\"group.completed || group.inProgress\")\n      .equipment-group\n        .flexrow.justify-flexrow-vertical.no-wrap\n          .flex3.left\n            +if(\"group.type === 'choice'\")\n              +if(\"group.completed\")\n                span.group-label Completed:\n                +else()\n                  span.group-label Choose one...\n          +if(\"isGroupEditable(group)\")\n            .flex0.right\n              IconButton.option(\n                on:click=\"{handleEditGroup(group.id)}\"\n                disabled=\"{disabled}\"\n                icon=\"fas fa-pencil\"\n              )\n        .options\n          +if(\"group.type === 'standalone'\")\n            .equipment-group\n              .flexrow.justify-flexrow-vertical.no-wrap\n                .flex3.left\n                  +if(\"!group.completed\")\n                    span.group-label All of the following:\n              +if(\"group.items[0].type === 'AND'\")\n                +each(\"group.items[0].children as item\")\n                  .equipment-item.option(\n                    class=\"{getEquipmentItemClasses(group, item, disabled)}\"\n                    on:click!=\"{item.type !== 'linked' ? handleSelection(disabled, group.id, item) : null}\"\n                  )\n                    .flexrow.justify-flexrow-vertical.no-wrap\n                      .flex0.relative.icon\n                        img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                      .flex2.left.name.black-link\n                        span {@html item.label}\n                +else()\n                  +each(\"group.items as item\")\n                    .equipment-item.option(\n                      class=\"{getEquipmentItemClasses(group, item, disabled)}\"\n                      on:click!=\"{item.type !== 'linked' ? handleSelection(disabled, group.id, item) : null}\"\n                    )\n                      .flexrow.justify-flexrow-vertical.no-wrap\n                        .flex0.relative.icon\n                          img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                        .flex2.left.name.black-link\n                          span {@html item.label}\n            +else()\n              +each(\"group.items as item\")\n                .equipment-item.option(\n                  class=\"{getOptionClasses(disabled, group, item)}\"\n                  on:click!=\"{handleSelection(disabled, group.id, item)}\"\n                )\n                  .flexrow.justify-flexrow-vertical.no-wrap\n                    .flex0.relative.icon\n                      img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                    .flex2.left.name.black-link\n                      span {@html item.label}\n                      +if(\"group.selectedItemId === item._id && $selectedItems[group.id]\")\n                        span.selected-name &nbsp;({$selectedItems[group.id].name})\n</template>\n\n<style lang=\"scss\">\n  @import '../../../../../styles/features/starting-equipment.sass';\n</style>\n    ","<script>\n  import { localize as t } from \"~/src/helpers/Utility\";\n  import { getContext, onDestroy, onMount, tick } from \"svelte\";\n  import {\n    equipmentSelections,\n    selectEquipment,\n    initializeGroup,\n    editGroup,\n    getEquipmentIcon,\n    selectedItems,\n    getEquipmentItemClasses,\n    getOptionClasses,\n    handleSelection,\n    isOptionDisabled,\n    matchingGroupsForSource,\n    isGroupFromSource,\n    isGroupNonEditable,\n  } from \"~/src/stores/equipmentSelections\";\n  import { setEquipmentGoldChoice } from \"~/src/stores/equipmentGold\";\n  import { MODULE_ID } from \"~/src/helpers/constants\";\n\n  import IconButton from \"~/src/components/atoms/button/IconButton.svelte\";\n  import ImageButton from \"~/src/components/atoms/button/ImageButton.svelte\";\n  import StartingEquipmentGroups2024 from \"~/src/components/atoms/dnd5e/2024/StartingEquipmentGroups.svelte\";\n  import StartingEquipmentGroups2014 from \"~/src/components/atoms/dnd5e/2014/StartingEquipmentGroups.svelte\";\n  // import EquipmentSelector from \"~/src/components/molecules/dnd5e/EquipmentSelector.svelte\";\n\n  export let startingEquipment = [];\n  export let classEquipment = [];\n  export let backgroundEquipment = [];\n  export let characterClass = null;\n  export let background = null;\n  export let disabled = false;\n  export let allEquipmentItems = [];\n  export let parsedEquipmentGold = null;\n  export let equipmentGoldOptions = null;\n\n  // Check if equipment selection is enabled in settings\n  const equipmentSelectionEnabled = game.settings.get(\n    MODULE_ID,\n    \"enableEquipmentSelection\",\n  );\n\n  function getGroupFromSelection(groupId) {\n    return $equipmentSelections[groupId];\n  }\n\n  $: window.GAS.log.d(\"StartingEquipment startingEquipment\", startingEquipment);\n\n  $: window.GAS.log.d(\n    \"StartingEquipment equipmentSelections\",\n    $equipmentSelections,\n  );\n\n  // Group equipment by source for 2024 rules - main grouping function\n  $: equipmentBySource = (() => {\n    if (window.GAS.dnd5eVersion < 4 || window.GAS.dnd5eRules !== \"2024\") {\n      // For non-2024 rules, just return equipment without source grouping\n      return [{ source: null, equipment: startingEquipment }];\n    }\n\n    const groups = [];\n\n    // Add class equipment if available\n    if (classEquipment?.length > 0) {\n      const classGroup = {\n        source: \"class\",\n        label: characterClass?.name || \"Class\",\n        equipment: classEquipment,\n      };\n      \n      // Add variable gold options for class if available\n      if (parsedEquipmentGold?.fromClass?.hasVariableGold && parsedEquipmentGold.fromClass.goldOptions?.length > 0) {\n        classGroup.variableGoldOptions = parsedEquipmentGold.fromClass.goldOptions;\n        classGroup.selectedVariableGold = equipmentGoldOptions?.fromClass?.selectedChoice;\n      }\n      \n      groups.push(classGroup);\n    }\n\n    // Add background equipment if available\n    if (backgroundEquipment?.length > 0) {\n      const backgroundGroup = {\n        source: \"background\",\n        label: background?.name || \"Background\",\n        equipment: backgroundEquipment,\n      };\n      \n      // Add variable gold options for background if available (though unlikely)\n      if (parsedEquipmentGold?.fromBackground?.hasVariableGold && parsedEquipmentGold.fromBackground.goldOptions?.length > 0) {\n        backgroundGroup.variableGoldOptions = parsedEquipmentGold.fromBackground.goldOptions;\n        backgroundGroup.selectedVariableGold = equipmentGoldOptions?.fromBackground?.selectedChoice;\n      }\n      \n      groups.push(backgroundGroup);\n    }\n\n    return groups;\n  })();\n\n  let previousGroupId = null;\n  \n  // Reactive statement to initialize groups when equipment data changes\n  $: {\n    startingEquipment.forEach((entry, index) => {\n\n        // For each entry in startingEquipment, process based on its type\n    // Only process OR entries that are at the top level (no parent group)\n    if (entry.type === \"OR\") {\n      if (entry.group) {\n        // Skip OR entries that belong to a parent group\n      } else {\n        \n        // Find all children belonging to this OR group\n        const children = startingEquipment.filter(\n          (item) => item.group === entry._id,\n        );\n\n        // If there's only one child in this OR group, treat it as a standalone entry\n        if (children.length === 1) {\n          const singleChild = children[0];\n          initializeGroup(entry._id, {\n            type: \"standalone\",\n            label: singleChild.label || entry.label,\n            items: [singleChild],\n            sort: entry.sort,\n          });\n        } else if (children.length > 1) {\n          // Normal OR group with multiple choices: initialize as a choice group\n          initializeGroup(entry._id, {\n            type: \"choice\",\n            label: t('Equipment.ChooseOne'),\n            items: children,\n            sort: entry.sort,\n          });\n        }\n        // Update previousGroupId to the current OR group's id for the next iteration\n        previousGroupId = entry._id;\n      }\n    } else if (entry.type === \"AND\" && !entry.group) {\n      // Process top-level AND groups - find all children and build the group\n      const children = startingEquipment.filter(\n        (item) => item.group === entry._id,\n      );\n\n      // Separate OR children from regular children\n      const orChildren = children.filter(child => child.type === \"OR\");\n      const regularChildren = children.filter(child => child.type !== \"OR\");\n\n      window.GAS.log.d('[StartingEquipment] Processing AND group', {\n        andEntryId: entry._id,\n        childrenCount: children.length,\n        orChildrenCount: orChildren.length,\n        regularChildrenCount: regularChildren.length\n      });\n\n      // Create choice groups for each OR child\n      orChildren.forEach(orChild => {\n        const orGrandchildren = startingEquipment.filter(\n          (item) => item.group === orChild._id,\n        );\n        \n        if (orGrandchildren.length > 1) {\n          // Create a separate choice group for this OR\n          initializeGroup(orChild._id, {\n            type: \"choice\",\n                          label: orChild.label || t('Equipment.ChooseOne'),\n            items: orGrandchildren,\n            sort: orChild.sort || entry.sort, // Use OR's sort or fallback to AND's sort\n            parentGroup: entry._id // Track that this belongs to the AND group\n          });\n          \n          window.GAS.log.d('[StartingEquipment] Created choice group for OR', {\n            orChildId: orChild._id,\n            orChildLabel: orChild.label,\n            orGrandchildrenCount: orGrandchildren.length,\n            parentGroupId: entry._id,\n            parentGroupLabel: entry.label\n          });\n        }\n      });\n\n      // Build the AND item with ALL children (including OR items for display)\n      // The OR items won't be interactive but will show what choice needs to be made\n      const andItemWithChildren = {\n        ...entry,\n        children: children // Keep all children for display\n      };\n\n      window.GAS.log.d('[StartingEquipment] Final AND item with all children', {\n        andItemId: entry._id,\n        totalChildrenCount: children.length\n      });\n\n      initializeGroup(entry._id, {\n        type: \"standalone\",\n        label: entry.label,\n        items: [andItemWithChildren],\n        sort: entry.sort,\n      });\n      \n      previousGroupId = entry._id;\n    } else if (!entry.group) {\n      // Standalone entry (not part of a group): initialize as its own group\n      initializeGroup(entry._id || \"standalone\", {\n        type: \"standalone\",\n        label: entry.label,\n        items: [entry],\n        sort: entry.sort,\n      });\n      // Update previousGroupId to this standalone's id\n      previousGroupId = entry._id || \"standalone\";\n    }\n  });\n  }\n\n  // Sort groups by their sort value\n  $: sortedGroups = Object.values($equipmentSelections).sort(\n    (a, b) => (a.sort || 0) - (b.sort || 0),\n  );\n\n\n\n  // Group items by type for specialized handling\n  $: groupedByType = sortedGroups.reduce((acc, group) => {\n    // window.GAS.log.d(\"StartingEquipment groupedByType group\", group);\n    const itemTypes = group.items.map((item) => item.type);\n    if (itemTypes.includes(\"focus\")) {\n      if (!acc.focus) acc.focus = [];\n      acc.focus.push(group);\n    } else if (itemTypes.includes(\"weapon\")) {\n      if (!acc.weapon) acc.weapon = [];\n      acc.weapon.push(group);\n    } else if (itemTypes.includes(\"armor\")) {\n      if (!acc.armor) acc.armor = [];\n      acc.armor.push(group);\n    } else if (itemTypes.includes(\"tool\")) {\n      if (!acc.tool) acc.tool = [];\n      acc.tool.push(group);\n    } else {\n      if (!acc.standard) acc.standard = [];\n      acc.standard.push(group);\n    }\n    return acc;\n  }, {});\n\n  // $: window.GAS.log.d(\"StartingEquipment equipmentSelections\", $equipmentSelections);\n  // $: window.GAS.log.d(\"StartingEquipment sortedGroups\", sortedGroups);\n  // $: window.GAS.log.d(\"StartingEquipment groupedByType\", groupedByType);\n  // $: window.GAS.log.d('$equipmentSelections', $equipmentSelections);\n\n  function handleEditGroup(groupId) {\n    // window.GAS.log.d(\"[Starting Equipment] editGroup\", { groupId });\n    editGroup(groupId);\n  }\n\n  function handleVariableGoldChoice(source, choice, goldAmount) {\n    if (disabled) return;\n    setEquipmentGoldChoice(source, choice, goldAmount);\n  }\n\n  onMount(async () => {\n    // window.GAS.log.d(\"StartingEquipment\", startingEquipment);\n  });\n\n</script>\n\n<template lang=\"pug\">\n  +if(\"startingEquipment?.length\")\n    section.starting-equipment\n      .flexrow\n        +if(\"!disabled\")\n          .flex0.required(class=\"{equipmentSelectionEnabled ? 'active' : ''}\") *\n        .flex3\n          h2.left {t('Equipment.Label')}\n      \n      //- For 2024 rules, group by source\n      +if(\"window.GAS.dnd5eVersion >= 4 && window.GAS.dnd5eRules === '2024' && equipmentBySource.length > 1\")\n        StartingEquipmentGroups2024(\n          equipmentBySource=\"{equipmentBySource}\"\n          sortedGroups=\"{sortedGroups}\"\n          handleEditGroup=\"{handleEditGroup}\"\n          disabled=\"{disabled}\"\n          selectedItems=\"{selectedItems}\"\n          handleVariableGoldChoice=\"{handleVariableGoldChoice}\"\n          parsedEquipmentGold=\"{parsedEquipmentGold}\"\n        )\n        +else()\n          //- Fallback for single source or non-2024 rules\n          StartingEquipmentGroups2014(\n            equipmentBySource=\"{equipmentBySource}\"\n            sortedGroups=\"{sortedGroups}\"\n            handleEditGroup=\"{handleEditGroup}\"\n            disabled=\"{disabled}\"\n            selectedItems=\"{selectedItems}\"\n          )\n</template>\n\n","<script>\nimport { getContext, onMount } from \"svelte\";\nimport { equipmentSelections, addGranularSelection, removeGranularSelection, getEquipmentIcon, initializeGroup, addChildGranularSelection, getRequiredSelectionsCount, editGroup } from \"~/src/stores/equipmentSelections\";\nimport { readOnlyTabs } from \"~/src/stores/index\";\nimport { localize as t } from \"~/src/helpers/Utility\";\nimport IconSelect from \"~/src/components/atoms/select/IconSelect.svelte\";\nimport { extractItemsFromPacksAsync, getPacksFromSettings } from \"~/src/helpers/Utility.js\";\nimport { MODULE_ID } from \"~/src/helpers/constants\";\n\n// Types that need additional configuration\nconst CONFIGURABLE_TYPES = ['tool', 'weapon', 'armor', 'focus'];\n\n// Check if equipment tab is readonly\n$: isDisabled = $readOnlyTabs.includes(\"equipment\");\n\n// Get equipment sources\nlet packs = getPacksFromSettings(\"equipment\");\nlet allEquipmentItemsFromPacks = [];\n\nonMount(async () => {\n  // Fetch full item data including system data\n  const rawItems = await extractItemsFromPacksAsync(packs, [\n    \"name->label\",\n    \"img\",\n    \"type\",\n    \"folder\",\n    \"uuid->value\",\n    \"_id\"\n  ], [\"system.type\", \"system.magicalBonus\", \"system.properties\"]);\n\n  // Process items to only keep the needed system fields\n  allEquipmentItemsFromPacks = rawItems.map(item => ({\n    ...item,\n    system: item.system ? {\n      type: item.system.type,\n      magicalBonus: item.system.magicalBonus,\n      properties: item.system.properties\n    } : undefined\n  }));\n\n  window.GAS.log.d('EquipmentSelectorDetail mounted', { \n    configurableSelections, \n    equipmentByType,\n    allEquipmentItemsFromPacks: allEquipmentItemsFromPacks.filter(item => item.type === 'focus')\n  });\n});\n\nconst showPackLabelInSelect = game.settings.get(MODULE_ID, 'showPackLabelInSelect');\n\n// Get the currently selected items that need configuration\n$: configurableSelections = Object.values($equipmentSelections).filter(group => {\n  // Log all groups for debugging\n  window.GAS.log.d('[EquipmentSelectorDetail] Evaluating group', {\n    groupId: group.id,\n    groupType: group.type,\n    hasSelectedItem: !!group.selectedItem,\n    selectedItemType: group.selectedItem?.type,\n    inProgress: group.inProgress,\n    completed: group.completed\n  });\n\n  // Only include groups that have a selected item and are configurable\n  if (!group.selectedItem || !group.inProgress) {\n    return false;\n  }\n\n  // Debug logging for all groups being evaluated\n  if (group.selectedItem && (CONFIGURABLE_TYPES.includes(group.selectedItem?.type) || group.selectedItem?.type === 'AND')) {\n    window.GAS.log.d('[EquipmentSelectorDetail] Configurable group found', {\n      groupId: group.id,\n      selectedItemType: group.selectedItem.type,\n      inProgress: group.inProgress,\n      isAND: group.selectedItem.type === 'AND',\n      hasConfigurableChildren: group.selectedItem?.type === 'AND' && \n        group.selectedItem?.children?.some(child => CONFIGURABLE_TYPES.includes(child.type))\n    });\n  }\n\n  // Include groups that are directly configurable OR are AND groups with configurable children\n  return CONFIGURABLE_TYPES.includes(group.selectedItem?.type) || \n         (group.selectedItem?.type === 'AND' && \n          group.selectedItem?.children?.some(child => CONFIGURABLE_TYPES.includes(child.type)));\n}).flatMap(group => {\n  // Handle AND groups with configurable children\n  if (group.selectedItem?.type === 'AND' && group.selectedItem?.children) {\n    window.GAS.log.d('[EquipSelect DETAIL] Processing AND group with children', {\n      groupId: group.id,\n      children: group.selectedItem.children.map(child => ({\n        type: child.type,\n        label: child.label,\n        _id: child._id\n      }))\n    });\n    \n    return group.selectedItem.children\n      .filter(child => CONFIGURABLE_TYPES.includes(child.type))\n      .map(child => ({ ...group, selectedItem: child, parentGroup: group }));\n  }\n\n  // If this group has a parentGroup that's a string ID, resolve it to the actual group object\n  if (group.parentGroup && typeof group.parentGroup === 'string') {\n    const parentGroupObject = $equipmentSelections[group.parentGroup];\n    window.GAS.log.d('[EquipmentSelectorDetail] Resolving parentGroup from string ID', {\n      groupId: group.id,\n      parentGroupId: group.parentGroup,\n      parentGroupObject: parentGroupObject ? {\n        id: parentGroupObject.id,\n        type: parentGroupObject.type,\n        label: parentGroupObject.label\n      } : null,\n      resolved: !!parentGroupObject\n    });\n    return [{ ...group, parentGroup: parentGroupObject }];\n  }\n\n  return [group];\n});\n\n// Filter equipment items by type for each configurable selection\n$: equipmentByType = configurableSelections.reduce((acc, group) => {\n  const type = group.selectedItem.type;\n  //- accumulate the items by group type\n  if (!acc[type]) {\n    acc[type] = allEquipmentItemsFromPacks\n      .filter(item => {\n        if (type === 'weapon' && group.selectedItem?.key) {\n          if (item.type !== type) return false;\n          // Handle composite weapon types\n          if (group.selectedItem.key === 'sim') {\n            return ['simpleM', 'simpleR'].includes(item.system?.type?.value) && !item.system?.magicalBonus && !item.system.properties?.includes('mgc');\n          }\n          if (group.selectedItem.key === 'mar') {\n            return ['martialM', 'martialR'].includes(item.system?.type?.value) && !item.system?.magicalBonus && !item.system.properties?.includes('mgc');\n          }\n          // Handle specific weapon types\n          if (['martialM', 'martialR', 'simpleM', 'simpleR'].includes(group.selectedItem.key)) {\n            return item.system?.type?.value === group.selectedItem.key && !item.system?.magicalBonus && !item.system.properties?.includes('mgc');\n          }\n          // Handle base item matching\n          return item.system?.baseItem === group.selectedItem.key;\n        }\n        if(type === 'focus' && group.selectedItem?.key) {\n          // window.GAS.log.d('EQUIPMENT DETAIL | Item matches type:', item, item.type, type );\n\n          return item.system?.properties?.includes('foc') && !item.system.properties?.includes('mgc');\n        }\n        if(type === 'armor' && group.selectedItem?.key) {\n          return item.system?.type?.value === group.selectedItem.key && !item.system.properties?.includes('mgc');\n        }\n        if(type === 'tool' && group.selectedItem?.key) {\n          return item.type === type && item.system.type.value === group.selectedItem.key && !item.system.properties?.includes('mgc');\n        }\n        return true;\n      })\n      .sort((a, b) => a.label.localeCompare(showPackLabelInSelect ? b.compoundLabel : b.label));\n  }\n  return acc;\n}, {});\n\n$: if(configurableSelections.length > 0) {\n  window.GAS.log.d('[EquipmentSelectorDetail] Configurable selections:', configurableSelections);\n  window.scrollTo(0, 0);\n  \n  // Delay scrolling to ensure the element is rendered\n  setTimeout(() => {\n    const firstEquipmentSelect = document.querySelector('.equipment-select');\n    if (firstEquipmentSelect) {\n      firstEquipmentSelect.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, 100); // Adjust the delay as necessary\n}\n\nfunction handleSelection(groupId, option, parentGroup) {\n  window.GAS.log.d('[EquipmentSelectorDetail] handleSelection called', {\n    groupId,\n    groupIdType: typeof groupId,\n    option,\n    parentGroup: parentGroup ? {\n      id: parentGroup.id,\n      type: parentGroup.type\n    } : null,\n    hasParentGroup: !!parentGroup,\n    willUseChildGranular: !!parentGroup\n  });\n\n  const value = typeof option === 'object' ? option.value : option;\n  \n  if (parentGroup) {\n    window.GAS.log.d('[EquipmentSelectorDetail] Calling addChildGranularSelection', {\n      parentGroupId: parentGroup.id,\n      childId: groupId,\n      value\n    });\n    addChildGranularSelection(parentGroup.id, groupId, value);\n  } else {\n    window.GAS.log.d('[EquipmentSelectorDetail] Calling addGranularSelection', {\n      groupId,\n      value\n    });\n    addGranularSelection(groupId, value);\n  }\n}\n\n/**\n * @description Create a handler factory function\n * @why The handler can only accept the selected value as a parameter, \n * so to pass the remaining parameters for the group, we need to create a factory function\n * which runs on mount and returns the handler function with the group details included\n * Then once selected, the handler is called with the selected value and the group details are included\n * @param {string} groupId - The id of the group\n * @param {object} parentGroup - The parent group\n * @returns {function} - The selection handler\n */\nfunction createSelectionHandler(groupId, parentGroup) {\n  \n  \n  return function selectionHandler(option) {\n    \n    handleSelection(groupId, option, parentGroup);\n  }\n}\n\n// Add this function to handle cancel\nfunction handleCancelSelection(group) {\n  const groupId = group.parentGroup ? group.parentGroup.id : group.id;\n  editGroup(groupId);\n}\n</script>\n\n<template lang=\"pug\">\nsection\n  +if(\"configurableSelections.length > 0 && !isDisabled\")\n    +each(\"configurableSelections as group\")\n      .equipment-config-item\n        .flexrow.justify-flexrow-vertical.no-wrap\n          .flex0.relative\n            img.icon(\n              src=\"{getEquipmentIcon(group.selectedItem.type)}\" \n              alt=\"{group.selectedItem.type}\"\n            )\n          .flex2.left.name.ml-sm\n            span {group.selectedItem.label}\n          +if(\"!isDisabled\")\n            .flex0.right\n              button.cancel-button(on:click!=\"{handleCancelSelection(group)}\")\n                i.fas.fa-times\n        \n        .equipment-select\n          +if(\"group.parentGroup\")\n            IconSelect.mb-md.icon-select(\n              options=\"{equipmentByType[group.selectedItem.type] || []}\"\n              active=\"{group.parentGroup.granularSelections?.children?.[group.id === group.parentGroup.id ? group.selectedItem._id : group.id]?.selections?.[0]}\"\n              placeHolder=\"{t('Equipment.SelectType', {type: group.selectedItem.type})}\"\n              handler=\"{createSelectionHandler(group.id === group.parentGroup.id ? group.selectedItem._id : group.id, group.parentGroup)}\"\n              id=\"equipment-select-{group.selectedItem._id}\"\n            )\n          +if(\"!group.parentGroup\")\n            IconSelect.mb-md.icon-select(\n              options=\"{equipmentByType[group.selectedItem.type] || []}\"\n              active=\"{group.granularSelections?.self?.[0]}\"\n              placeHolder=\"{t('Equipment.SelectType', {type: group.selectedItem.type})}\"\n              handler=\"{createSelectionHandler(group.id)}\"\n              id=\"equipment-select-{group.selectedItem._id}\"\n            )\n</template>\n\n<style lang=\"sass\">\n\n.empty-state\n  text-align: center\n  color: var(--color-text-dark-secondary)\n  font-style: italic\n  padding: 1rem\n\n.equipment-type-section\n  margin-bottom: 1.5rem\n  \n  &:last-child\n    margin-bottom: 0\n\n.type-header\n  color: var(--color-text-highlight)\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1)\n  padding-bottom: 0.5rem\n  margin-bottom: 1rem\n\n.equipment-config-item\n  background: rgba(0, 0, 0, 0.3)\n  border-radius: var(--border-radius)\n  padding: 0.3rem 1rem\n  margin-bottom: 0.3rem\n\n  &:last-child\n    margin-bottom: 0\n\n.icon\n  margin-right: 2rem\n  border: none\n  filter: brightness(1) drop-shadow(0 2px 3px rgba(0, 0, 0, 0.5))\n\n.name\n  font-size: 1.1em\n  line-height: 32px\n  color: var(--color-text-dark-primary)\n\n// Configuration section styles\n.tool-config,\n.armor-config,\n.weapon-config,\n.focus-config\n  margin-top: 0.3rem\n  padding-top: 0.3rem\n  border-top: 1px solid rgba(255, 255, 255, 0.1)\n\n.equipment-select\n  margin-top: 0.3rem\n  padding-top: 0.3  rem\n  border-top: 1px solid rgba(255, 255, 255, 0.1)\n\n:global(.icon-select)\n  position: relative\n\n.cancel-button\n  background: none\n  border: none\n  color: var(--color-text-dark-secondary)\n  padding: 0.5rem\n  cursor: pointer\n  transition: color 0.2s ease\n\n  &:hover\n    color: var(--color-text-highlight)\n\n  i\n    font-size: 1.2em\n</style>","<script>\nimport { getContext, onMount } from \"svelte\";\nimport { equipmentSelections, flattenedSelections } from \"~/src/stores/equipmentSelections\";\nimport { localize as t, enrichHTML } from \"~/src/helpers/Utility\";\nimport { readOnlyTabs } from \"~/src/stores/index\";\n\nlet plannedItems = [];\n\n// Track the raw selections\n$: rawSelections = $flattenedSelections || [];\n\n// $: window.GAS.log.d('PLANNED INVENTORY | flattenedSelections', $flattenedSelections);\n\n// Handle async updates when selections change and group identical items\n$: {\n  Promise.all(rawSelections.map(async (selection) => {\n    if(selection.type === 'linked') {\n      return await fromUuid(selection.key);\n    }\n    if(selection.key) {\n      return await fromUuid(selection.key);\n    }\n    return selection;\n  })).then(items => {\n    // Group identical items and sum their quantities\n    const groupedItems = items.reduce((acc, item) => {\n      if (!item) return acc;\n      \n      const key = item.uuid || item._id;\n      if (!acc[key]) {\n        acc[key] = {\n          ...item,\n          system: {\n            ...item.system,\n            quantity: 1\n          },\n          uuid: key\n        };\n      } else {\n        acc[key].system.quantity = (acc[key].system.quantity || 1) + 1;\n      }\n      return acc;\n    }, {});\n\n    plannedItems = Object.values(groupedItems);\n  });\n}\n\nfunction getItemName(item) {\n  // window.GAS.log.d('PLANNED INVENTORY | getItemName', item);\n  return `@UUID[${item?.uuid}]{${item?.name}}`\n}\n\n// $: window.GAS.log.d('[PlannedInventory] flattenedSelections', $flattenedSelections);\n// $: window.GAS.log.d('[PlannedInventory] plannedItems', plannedItems);\nlet unsubscribe;\n\n\n// Check if equipment tab is readonly\n$: isDisabled = $readOnlyTabs.includes(\"equipment\");\n\nonMount(() => {\n\n});\n</script>\n\n<template lang=\"pug\">\n.planned-inventory\n  h3 {t('Equipment.PlannedInventory')}\n  +if('!isDisabled')\n    table.inventory-table\n      thead\n        tr\n          th \n          th.white {t('Item')}\n          th.white {t('Equipment.Weight')}\n          th.white {t('Equipment.Quantity')}\n      tbody\n        +if('plannedItems.length === 0')\n          tr\n            td(colspan=\"4\").empty-message {t('Equipment.NoItemsSelected')}\n          +else()\n            +each('plannedItems as item')\n              tr\n                td(width=\"50\")\n                  +if('item && item.img')\n                    img(src=\"{item.img}\" width=\"32\" height=\"32\")\n                    +else()\n                      img(src=\"icons/svg/item-bag.svg\" width=\"32\" height=\"32\")\n                +await(\"enrichHTML(getItemName(item) || '')\")\n                  +then(\"Html\")\n                    td= \"{@html Html || '--'}\"\n                td.weight= \"{item?.system?.weight?.value || 0}\"\n                td.quantity= \"{item?.system?.quantity || 1}\"\n  +if('isDisabled')\n    .info-message {t('Equipment.EquipmentConfirmed')}\n</template>\n\n<style lang=\"sass\">\n.planned-inventory\n  margin-top: 1rem\n  padding: 1rem\n  background: rgba(0, 0, 0, 0.05)\n  border-radius: var(--border-radius)\n\n.inventory-table\n  width: 100%\n  border-collapse: collapse\n  margin-top: 0.5rem\n  th, td\n    text-align: left\n    padding: 0 0.5rem\n    border-bottom: 1px solid rgba(0, 0, 0, 0.1)\n\n    img\n      margin-top: 0.3rem\n  th\n    font-weight: bold\n    color: var(--color-text-dark-primary)\n\n  td.quantity, td.weight\n    text-align: center\n\n  tbody tr:hover\n    background: rgba(0, 0, 0, 0.03)\n\n  .empty-message\n    text-align: center\n    color: var(--color-text-dark-secondary)\n    font-style: italic\n\n.inventory-table th:first-child,\n.inventory-table td:first-child\n  width: 50px\n  min-width: 50px\n  max-width: 50px\n</style>","<script>\n  import { onMount } from \"svelte\";\n  import { goldRoll } from \"~/src/stores/storeDefinitions\";\n  import { localize as t } from \"~/src/helpers/Utility\";\n  import { MODULE_ID } from \"~/src/helpers/constants\";\n  import { getContext } from \"svelte\";\n  import { goldChoices, areGoldChoicesComplete } from \"~/src/stores/goldChoices\";\n  import { parsedEquipmentGold, areEquipmentGoldChoicesComplete, equipmentGoldOptions } from \"~/src/stores/equipmentGold\";\n  import { destroyAdvancementManagers } from \"~/src/helpers/AdvancementManager\";\n\n  import { compatibleStartingEquipment, classStartingEquipment, backgroundStartingEquipment } from \"~/src/stores/startingEquipment\";\n  import { characterClass, characterSubClass, background, readOnlyTabs } from \"~/src/stores/index\";\n  import StartingGold from \"~/src/components/molecules/dnd5e/StartingGold.svelte\";\n  import StartingGoldv4 from \"~/src/components/molecules/dnd5e/v4/StartingGold.svelte\";\n  \n  import StartingEquipment from \"~/src/components/molecules/dnd5e/StartingEquipment.svelte\";\n  import EquipmentSelectorDetail from \"~/src/components/molecules/dnd5e/EquipmentSelection/EquipmentSelectorDetail.svelte\";\n  import PlannedInventory from \"~/src/components/molecules/dnd5e/EquipmentSelection/PlannedInventory.svelte\";\n  import StandardTabLayout from \"~/src/components/organisms/StandardTabLayout.svelte\";\n  const doc = getContext(\"#doc\");\n\n  // Get equipment selection setting\n  $: equipmentSelectionEnabled = game.settings.get(MODULE_ID, \"enableEquipmentSelection\");\n\n  // Track if gold has been rolled/selected based on version\n  $: isGoldComplete = window.GAS.dnd5eVersion >= 4  && window.GAS.dnd5eRules === \"2024\" ? $areGoldChoicesComplete : $goldRoll > 0;\n  \n  // For 2024 rules, check if user chose equipment (vs gold only) for class/background\n  $: userChoseEquipment = window.GAS.dnd5eVersion >= 4 && window.GAS.dnd5eRules === \"2024\" ? \n    ($goldChoices.fromClass.choice === 'equipment' || $goldChoices.fromBackground.choice === 'equipment') : true;\n  \n  // Check if we have variable gold that still needs equipment selection to complete\n  $: hasVariableGoldNeedingSelection = $parsedEquipmentGold && \n    (($parsedEquipmentGold.fromClass.hasVariableGold && $goldChoices.fromClass.choice === 'equipment') ||\n     ($parsedEquipmentGold.fromBackground.hasVariableGold && $goldChoices.fromBackground.choice === 'equipment'));\n  \n  // Equipment should show when user chose equipment AND (choices complete OR variable gold needs selection)\n  $: shouldShowEquipment = window.GAS.dnd5eVersion >= 4 && window.GAS.dnd5eRules === \"2024\" ? \n    (userChoseEquipment && ($areGoldChoicesComplete || hasVariableGoldNeedingSelection)) :\n    ($goldRoll > 0);\n\n  // Get proficiencies from actor\n  $: proficiencies = $doc.system?.proficiencies || {};\n\n  // Check if equipment tab is readonly\n  $: isDisabled = $readOnlyTabs.includes(\"equipment\");\n\n  $: window.GAS.log.d(\"Equipment goldChoices\", $goldChoices);\n\n  $: window.GAS.log.d(\"Equipment compatibleStartingEquipment\", $compatibleStartingEquipment);\n\n  $: window.GAS.log.d(\"Equipment component:\", {\n    isDisabled,\n    readOnlyTabs: $readOnlyTabs,\n    characterClass: $characterClass,\n    background: $background,\n    classWealth: $characterClass?.system?.wealth,\n    goldRoll: $goldRoll\n  });\n\n  onMount(() => {\n    if(game.settings.get(MODULE_ID, 'disableAdvancementCapture')) {\n      window.GAS.log.d('[EQUIPMENT] Advancement capture disabled - destroying advancement managers');\n      destroyAdvancementManagers();\n    }\n    \n    // For 2014 rules ONLY, reset gold roll to show choice interface\n    // Don't reset for 2024 rules as they use goldChoices store\n    if (window.GAS.dnd5eVersion < 4 || (window.GAS.dnd5eVersion >= 4 && window.GAS.dnd5eRules === \"2014\")) {\n      window.GAS.log.d('[EQUIPMENT] Resetting gold roll for 2014 rules to show choice interface');\n      goldRoll.set(0);\n    }\n  });\n\n</script>\n\n<template lang=\"pug\">\nStandardTabLayout(tabName=\"equipment\")\n  div(slot=\"left\")\n    //- pre dnd5eVersion { window.GAS.dnd5eVersion}\n    //- pre dnd5eRules { window.GAS.dnd5eRules}\n    h3 {t('Equipment.StartingGold')}\n    +if(\"isDisabled\")\n      .info-message {t('Equipment.EquipmentReadOnly')}\n    \n    section.equipment-flow(class=\"{isDisabled ? 'readonly' : ''}\")        \n      +if(\"window.GAS.dnd5eVersion >= 4 && window.GAS.dnd5eRules === '2024'\")\n        StartingGoldv4(characterClass=\"{$characterClass}\" background=\"{$background}\")\n        +else()\n          StartingGold(characterClass=\"{$characterClass}\")\n      +if(\"shouldShowEquipment || isDisabled\")\n        StartingEquipment(\n          startingEquipment=\"{$compatibleStartingEquipment}\" \n          classEquipment=\"{$classStartingEquipment}\"\n          backgroundEquipment=\"{$backgroundStartingEquipment}\"\n          characterClass=\"{$characterClass}\"\n          background=\"{$background}\"\n          proficiencies=\"{proficiencies}\"\n          disabled=\"{isDisabled}\"\n          parsedEquipmentGold=\"{$parsedEquipmentGold}\"\n          equipmentGoldOptions=\"{$equipmentGoldOptions}\"\n        )\n  div(slot=\"right\")\n    PlannedInventory\n    EquipmentSelectorDetail\n</template>\n\n<style lang=\"sass\">\n.equipment-flow\n  margin-top: 1rem\n  display: flex\n  flex-direction: column\n  gap: 1rem\n\nsection\n  background: rgba(0, 0, 0, 0.05)\n  border-radius: var(--border-radius)\n  padding: 1rem\n\n:global(.equipment-flow .starting-gold)\n  background: transparent !important\n  margin-top: 0 !important\n  padding: 0 !important\n\n:global(.equipment-flow .starting-equipment)\n  background: transparent !important\n  margin-top: 0 !important\n  padding: 0 !important\n\n.info-message\n  font-size: 0.8rem\n  color: #666\n  font-style: italic\n  margin-top: 1rem\n  margin-bottom: 0.5rem\n  padding: 1rem\n  background: rgba(0, 0, 0, 0.05)\n  border-radius: var(--border-radius)\n\n.equipment-flow.readonly\n  opacity: 0.7\n  pointer-events: none\n  \n  :global(*)\n    cursor: default !important\n</style> "],"names":["ctx","create_if_block_1","create_if_block_3","create_if_block_2","create_if_block","t","characterClass","create_if_block_4","create_if_block_6","create_if_block_5","background","selectedItems","parsedEquipmentGold","equipmentGoldOptions","handleSelection"],"mappings":"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"}