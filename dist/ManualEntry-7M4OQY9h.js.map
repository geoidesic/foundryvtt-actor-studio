{"version":3,"file":"ManualEntry-7M4OQY9h.js","sources":["../src/components/molecules/dnd5e/AbilityEntry/ManualEntry.svelte"],"sourcesContent":["<script>\n  import { Timing } from \"@typhonjs-fvtt/runtime/util\";\n  import {\n    createEventDispatcher,\n    getContext,\n    onDestroy,\n    onMount,\n    tick,\n  } from \"svelte\";\n  import { abilities, race } from \"~/src/stores/index\";\n\n  export let document = false;\n\n  const dispatch = createEventDispatcher();\n  const doc = document || getContext(\"#doc\");\n  const updateDebounce = Timing.debounce(updateValue, 300);\n\n  async function updateValue(attr, event) {\n    const options = {\n      system: { abilities: { [attr]: { value: Number(event.target.value) } } },\n    };\n    await $doc.updateSource(options);\n\n    if ($doc.render) {\n      $doc.render();\n    }\n  }\n\n  $: systemAbilities = game.system.config.abilities;\n  $: systemAbilitiesArray = Object.entries(systemAbilities);\n  $: raceFeatScore = 0;\n  $: abilityAdvancements =\n    $race?.advancement?.byType?.AbilityScoreImprovement?.[0].configuration\n      ?.fixed;\n\n  $: console.log(systemAbilitiesArray);\n  onMount(async () => {});\n</script>\n\n<template lang=\"pug\">\n.attribute-entry.mt-sm\n  table\n    thead\n      tr\n        th.ability Ability\n        th.center Base\n        +if(\"window.GAS.dnd5eRules == '2014'\")\n          th.center Origin\n        th.center Score\n        th.center Modifier\n    tbody\n      +each(\"systemAbilitiesArray as ability, index\")\n        tr\n          td.ability {ability[1].label}\n          td.center\n            input.score.center.small(name=\"{ability[0]}\" id=\"{ability[0]}\" type=\"number\" value=\"{$doc.system.abilities[ability[0]]?.value}\" on:input!=\"{updateDebounce(ability[0], event)}\")\n          \n          +if(\"window.GAS.dnd5eRules == '2014'\")\n            td.center\n              +if(\"abilityAdvancements?.[ability[0]] > 0\")\n                span +\n              span {abilityAdvancements?.[ability[0]] || 0}\n          \n          td.center {(Number(abilityAdvancements?.[ability[0]]) || 0) + Number($doc.system.abilities[ability[0]]?.value || 0)}\n          td.center\n            +if(\"Number($doc.system.abilities[ability[0]]?.mod) + (Number(abilityAdvancements?.[ability[0]]) || 0) > 0\")\n              span +\n            span {Number($doc.system.abilities[ability[0]]?.mod) + (Number(abilityAdvancements?.[ability[0]]) || 0)}\n\n</template>\n\n<style lang=\"sass\">\n  table\n    width: 100%\n    border-collapse: separate\n  input.score\n    min-width: 40px\n    color: var(--gas-color-text)\n  th\n    padding: 0.1rem 0.5rem\n    text-align: left\n    font-family: var(--dnd5e-font-modesto)\n    &.center\n      text-align: center\n    &.ability\n      width: 25%\n   \n  td\n    text-align: left\n    &.center\n      text-align: center\n    &.ability\n      width: 25%\n</style>\n"],"names":["ctx","attr","event"],"mappings":"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"}