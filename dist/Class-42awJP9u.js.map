{"version":3,"file":"Class-42awJP9u.js","sources":["../src/components/organisms/dnd5e/Tabs/Class.svelte"],"sourcesContent":["<script>\n  import SvelteSelect from \"svelte-select\";\n  import IconSelect from \"~/src/components/atoms/select/IconSelect.svelte\";\n  import {\n    extractMapIteratorObjectProperties,\n    extractItemsFromPacksSync,\n    extractItemsFromPacksAsync,\n    getPacksFromSettings,\n    getAdvancementValue,\n    getSubclassLevel,\n    illuminatedDescription,\n  } from \"~/src/helpers/Utility.js\";\n  import { getContext, onDestroy, onMount, tick } from \"svelte\";\n  import {\n    characterClass,\n    characterSubClass,\n    level,\n    subClassesForClass,\n    readOnlyTabs,\n  } from \"~/src/stores/index\";\n  import { localize } from \"#runtime/svelte/helper\";\n  import { TJSSelect } from \"@typhonjs-fvtt/svelte-standard/component\";\n  import { MODULE_ID } from \"~/src/helpers/constants\";\n  import DonationTracker from \"~/src/plugins/donation-tracker\";\n  import StartingEquipment from \"~/src/components/molecules/dnd5e/StartingEquipment.svelte\";\n  import StartingGold from \"~/src/components/molecules/dnd5e/StartingGold.svelte\";\n  import { clearEquipmentSelections } from \"~/src/stores/equipmentSelections\";\n  import { goldRoll } from \"~/src/stores/storeDefinitions\";\n\n  let richHTML = \"\",\n    html = \"\",\n    richSubClassHTML = \"\",\n    selectedCharacterClass = null,\n    activeSubClass = null,\n    classValue = null,\n    subclassValue = null,\n    subClassesIndex,\n    subclasses,\n    classesPlaceholder = \"Classes\",\n    subclassesPlaceholder = \"Subclasses\",\n    packs = getPacksFromSettings(\"classes\"),\n    subClassesPacks = getPacksFromSettings(\"subclasses\"),\n    classAdvancementArrayFiltered = [],\n    classAdvancementExpanded = false,\n    equipmentSelectionExpanded = false,\n    subClassAdvancementArrayFiltered = [],\n    subClassAdvancementExpanded = false,\n    mappedClassIndex = extractItemsFromPacksSync(packs, [\n      \"name->label\",\n      \"img\",\n      \"type\",\n      \"folder\",\n      \"uuid->value\",\n      \"_id\",\n    ]),\n    filteredClassIndex;\n\n  const showPackLabelInSelect = game.settings.get(\n    MODULE_ID,\n    \"showPackLabelInSelect\",\n  );\n\n  filteredClassIndex = mappedClassIndex\n    .filter((i) => {\n      return i.type == \"class\";\n    })\n    .sort((a, b) =>\n      a.label.localeCompare(showPackLabelInSelect ? b.compoundLabel : b.label),\n    );\n\n  // window.GAS.log.d('packs', packs);\n  // window.GAS.log.d('mappedClassIndex', mappedClassIndex);\n  // window.GAS.log.d('subClassesPacks', subClassesPacks);\n\n  const levelOptions = [];\n  for (let i = 1; i <= 20; i++) {\n    levelOptions.push({ label: \"Level \" + i, value: i });\n  }\n\n  const selectStyles = {\n    // width: '50%',\n    // display: 'inline-block',\n    // fontSize: 'smaller',\n  };\n\n  const actor = getContext(\"#doc\");\n\n  const levelSelectHandler = async (option) => {\n    subClassesIndex = await getFilteredSubclassIndex();\n    await tick();\n    importClassAdvancements();\n    importSubClassAdvancements();\n  };\n\n  const getFilteredSubclassIndex = async () => {\n    let filteredSubClassIndex = [];\n    let mappedSubClassIndex = await extractItemsFromPacksAsync(\n      subClassesPacks,\n      [\"name->label\", \"img\", \"type\", \"folder\", \"uuid->value\", \"_id\"],\n      [\"system.classIdentifier\"],\n    );\n\n    // window.GAS.log.d('mappedSubClassIndex', mappedSubClassIndex);\n    mappedSubClassIndex = mappedSubClassIndex.filter((x) => {\n      // window.GAS.log.d(\"subclass\", x);\n      // window.GAS.log.d(\"$characterClass.system.identifier\", $characterClass.system.identifier);\n      return x.system?.classIdentifier == $characterClass?.system?.identifier;\n    });\n\n    // window.GAS.log.d('mappedSubClassIndex', mappedSubClassIndex);\n    const output = mappedSubClassIndex\n      .flat()\n      .sort((a, b) =>\n        a.label.localeCompare(\n          showPackLabelInSelect ? b.compoundLabel : b.label,\n        ),\n      );\n    // window.GAS.log.d(\"subclass output\", output);\n    return output;\n  };\n\n  const handleSelectClass = async (option) => {\n    activeSubClass = null;\n    $characterSubClass = null;\n    subclassValue = null;\n    subClassAdvancementArrayFiltered = [];\n    richSubClassHTML = \"\";\n\n    // Reset gold roll when changing class\n    goldRoll.set(0);\n\n    const selectedClass = await fromUuid(option);\n    $characterClass = selectedClass;\n    selectedCharacterClass = option;\n    if(!classValue) {\n      classValue = option;\n    }\n\n    clearEquipmentSelections();\n\n    await tick();\n    subClassesIndex = await getFilteredSubclassIndex();\n    $subClassesForClass = subClassesIndex;\n    // window.GAS.log.d('subClassesForClass', $subClassesForClass);\n\n    await tick();\n    await importClassAdvancements();\n    richHTML = await illuminatedDescription(html, $characterClass);\n  };\n\n  const importClassAdvancements = async () => {\n    // Reset the components object first\n    classAdvancementComponents = {};\n\n    for (const classAdvancement of classAdvancementArrayFiltered) {\n      try {\n        const module = await import(\n          `~/src/components/molecules/dnd5e/Advancements/${classAdvancement.type}.svelte`\n        );\n        classAdvancementComponents[classAdvancement.type] = module.default;\n        await tick();\n      } catch (error) {\n        window.GAS.log.e(\n          `Failed to load component for ${classAdvancement.type}:`,\n          error,\n        );\n      }\n    }\n  };\n\n  const handleSelectSubClass = async (option) => {\n    const selectedSubClass = await fromUuid(option);\n    $characterSubClass = selectedSubClass;\n    activeSubClass = option;\n    if(!subclassValue) {\n      subclassValue = option;\n    }\n    await tick();\n    importClassAdvancements();\n    importSubClassAdvancements();\n    richSubClassHTML = await illuminatedDescription(\n      $characterSubClass.system.description.value,\n      $characterSubClass,\n    );\n  };\n\n  const importSubClassAdvancements = async () => {\n    for (const subClassAdvancement of subClassAdvancementArrayFiltered) {\n      try {\n        const module = await import(\n          `~/src/components/molecules/dnd5e/Advancements/${subClassAdvancement.type}.svelte`\n        );\n        await tick();\n        subClassAdvancementComponents[subClassAdvancement.type] =\n          module.default;\n      } catch (error) {\n        window.GAS.log.e(\n          `Failed to load component for ${subClassAdvancement.type}:`,\n          error,\n        );\n      }\n    }\n  };\n\n  const toggleClassAdvancements = () => {\n    classAdvancementExpanded = !classAdvancementExpanded;\n  };\n  const toggleEquipmentSelection = () => {\n    equipmentSelectionExpanded = !equipmentSelectionExpanded;\n  };\n\n  const toggleSubClassAdvancements = () => {\n    subClassAdvancementExpanded = !subClassAdvancementExpanded;\n  };\n\n  // $: window.GAS.log.d('subclasses', subclasses);\n\n  $: html = $characterClass?.system?.description.value || \"\";\n  $: subClassProp = activeSubClass;\n  $: classProp = selectedCharacterClass;\n  $: classAdvancementComponents = {};\n  $: subClassAdvancementComponents = {};\n  $: subClassLevel = $characterClass\n    ? getSubclassLevel($characterClass, MODULE_ID)\n    : false;\n  $: classGetsSubclassThisLevel = subClassLevel && subClassLevel === $level;\n  $: isDisabled = $readOnlyTabs.includes(\"class\");\n\n  $: combinedHtml = $characterClass\n    ? `\n      ${richHTML}\n      ${richSubClassHTML ? `<h1>${localize(\"GAS.SubClass\")}</h1>${richSubClassHTML}` : \"\"}\n  `\n    : \"\";\n\n  $: if (subClassesIndex?.length) {\n    subclasses = subClassesIndex\n      .flat()\n      .sort((a, b) => a.label.localeCompare(b.label));\n  } else {\n    subclasses = [];\n  }\n\n  $: if (isDisabled) {\n    classAdvancementExpanded = true;\n  }\n\n  $: if ($characterSubClass?.system?.advancement.length) {\n    subClassAdvancementArrayFiltered =\n      $characterSubClass.system.advancement.filter(\n        (value) => value.level === $level,\n      );\n  } else {\n    subClassAdvancementArrayFiltered = [];\n  }\n\n  $: if ($characterClass?.system?.advancement.length) {\n    classAdvancementArrayFiltered = $characterClass.system.advancement.filter(\n      (value) => value.level === $level,\n    );\n  } else {\n    classAdvancementArrayFiltered = [];\n  }\n\n  onMount(async () => {\n    let classUuid, subclassUuid;\n    if (window.GAS.debug) {\n      classUuid = window.GAS.characterClass;\n      subclassUuid = window.GAS.characterSubClass;\n    } else {\n      classUuid = $characterClass?.uuid;\n      subclassUuid = $characterSubClass?.uuid;\n    }\n    if (classUuid) {\n      await handleSelectClass(classUuid);\n    }\n    if (subclassUuid) {\n      await handleSelectSubClass(subclassUuid);\n    }\n  });\n</script>\n\n<template lang=\"pug\">\n  .content\n    .flexrow\n      .flex2.pr-sm.col-a\n        .flexrow\n          .flex0.required(class=\"{$characterClass ? '' : 'active'}\") *\n          .flex3 \n            IconSelect.icon-select(active=\"{classProp}\" options=\"{filteredClassIndex}\"  placeHolder=\"{classesPlaceholder}\" handler=\"{handleSelectClass}\" id=\"characterClass-select\" bind:value=\"{classValue}\" disabled=\"{isDisabled}\")\n        +if(\"$characterClass\")\n          +if(\"subclasses.length && classGetsSubclassThisLevel\")\n            h3.left.mt-md {localize('GAS.SubClass')}\n            .flexrow\n              .flex0.required(class=\"{$characterSubClass ? '' : 'active'}\") *\n              .flex3\n                IconSelect.icon-select(active=\"{subClassProp}\" options=\"{subclasses}\"  placeHolder=\"{subclassesPlaceholder}\" handler=\"{handleSelectSubClass}\" id=\"subClass-select\" bind:value=\"{subclassValue}\" truncateWidth=\"17\" disabled=\"{isDisabled}\")\n          +if(\"!isDisabled\")\n            h3.left.mt-sm {localize('GAS.Tabs.Classes.FilterByLevel')}\n            .flexrow\n              .flex2.left\n                TJSSelect( options=\"{levelOptions}\" store=\"{level}\" on:change=\"{levelSelectHandler}\" styles=\"{selectStyles}\" )\n          +if(\"classAdvancementArrayFiltered\")\n            h3.left.mt-sm.flexrow\n              .flex0(on:click=\"{toggleClassAdvancements}\")\n                +if(\"classAdvancementExpanded\")\n                  span [-]\n                +if(\"!classAdvancementExpanded\")\n                  spen [+]\n              .flex {localize('GAS.Tabs.Classes.Class')} {localize('GAS.Advancements')}\n              .flex0.div.badge.right.inset.ml-sm.mb-xs {localize('GAS.Level')} {$level}\n            ul.icon-list\n              +if(\"!classAdvancementArrayFiltered.length && !classGetsSubclassThisLevel\")\n                li.left {localize('GAS.NoAdvancements')}\n              +if(\"!classAdvancementArrayFiltered.length && classGetsSubclassThisLevel && classAdvancementExpanded\")\n                li.left \n                  .flexrow\n                    .flex0.relative.image\n                      img.icon(src=\"systems/dnd5e/icons/svg/items/subclass.svg\" alt=\"Subclass\")\n                    .flex2 {localize('GAS.SubClass')}\n              +if(\"classAdvancementArrayFiltered.length && classAdvancementExpanded\")\n                +each(\"classAdvancementArrayFiltered as advancement\")\n                  //- @todo: this should be broken out into components for each advancement.type\n                  li.left(data-type=\"{advancement.type}\")\n                    .flexrow(data-tooltip=\"{getAdvancementValue(advancement)}\" data-tooltip-class=\"gas-tooltip dnd5e2 dnd5e-tooltip item-tooltip\")\n                      .flex0.relative.image\n                        img.icon(src=\"{advancement.icon}\" alt=\"{advancement.title}\")\n                      .flex2 {advancement.title}\n                    .flexrow\n                      //- pre {JSON.stringify(advancement, null, 2)}\n                      svelte:component(this=\"{classAdvancementComponents[advancement.type]}\" advancement=\"{advancement}\")\n          \n          +if(\"$characterClass?.system?.startingEquipment?.length\")\n            h3.left.mt-sm.flexrow\n              .flex0(on:click=\"{toggleEquipmentSelection}\")\n                +if(\"equipmentSelectionExpanded\")\n                  span [-]\n                +if(\"!equipmentSelectionExpanded\")\n                  spen [+]\n              .flex Starting Equipment\n            +if(\"equipmentSelectionExpanded && !isDisabled\")\n              .flexrow\n                StartingGold(characterClass=\"{$characterClass}\" disabled=\"{true}\")\n              .flexrow\n                StartingEquipment(startingEquipment=\"{$characterClass.system.startingEquipment}\" disabled=\"{true}\")\n            +if(\"equipmentSelectionExpanded && isDisabled\")\n              p.left See Equipment tab\n  \n          +if(\"subclasses.length\")\n            //- h3.left.mt-sm Description\n            //- .left.sub-class(bind:innerHTML=\"{richSubClassHTML}\" contenteditable)\n            +if(\"subClassAdvancementArrayFiltered.length\")\n              h3.left.mt-sm.flexrow\n                .flex0(on:click=\"{toggleSubClassAdvancements}\")\n                  +if(\"subClassAdvancementExpanded\")\n                    span [-]\n                  +if(\"!subClassAdvancementExpanded\")\n                    spen [+]\n                .flex {localize('GAS.Tabs.Classes.SubClass')} {localize('GAS.Advancements')}\n                .flex0.div.badge.right.inset.ml-sm.mb-xs {localize('GAS.Level')} {$level}\n              ul.icon-list\n                +if(\"!subClassAdvancementArrayFiltered.length\")\n                  li.left {localize('GAS.NoAdvancements')}\n                +if(\"subClassAdvancementArrayFiltered.length && subClassAdvancementExpanded\")\n                  +each(\"subClassAdvancementArrayFiltered as advancement\")\n                      //- @todo: this should be broken out into components for each advancement.type\n                      li.left(data-type=\"{advancement.type}\")\n                        .flexrow(data-tooltip=\"{getAdvancementValue(advancement)}\" data-tooltip-locked=\"true\" data-tooltip-class=\"gas-tooltip dnd5e2 dnd5e-tooltip item-tooltip\" )\n                          .flex0.relative.image\n                            img.icon(src=\"{advancement.icon}\" alt=\"{advancement.title}\")\n                          .flex2 {advancement.title}\n                        .flexrow\n                          svelte:component(this=\"{subClassAdvancementComponents[advancement.type]}\" advancement=\"{advancement}\")\n  \n      .flex0.border-right.right-border-gradient-mask \n      .flex3.left.pl-md.scroll.col-b {@html combinedHtml}\n\n</template>\n\n<style lang=\"sass\">\n  @import \"../../../../../styles/Mixins.scss\"\n  .content \n    @include staticOptions\n\n    .badge.inset\n      @include badge()\n      @include inset\n      display: inline-block\n      white-space: nowrap\n\n\n  :global(.icon-select)\n    position: relative\n  \n  .sub-class\n    height: 100px\n    overflow-y: auto\n    padding: 0.5rem\n    border: 1px solid transparent\n    border-radius: 5px\n    box-shadow: 0 0 5px rgba(0,0,0,0.3) inset\n    font-size: smaller\n\n</style>\n"],"names":["ctx"],"mappings":"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"}