{"version":3,"file":"IconSelect-BJh00Elr.js","sources":["../src/components/atoms/select/IconSelect.svelte"],"sourcesContent":["\n  <script>\n\n  /**\n   * @author: Noel da Costa\n   * @copyright: Arc Digital Limited 11-05-2024\n   * @license: https://creativecommons.org/licenses/by/4.0/\n   */\n\n    import { onMount, onDestroy } from \"svelte\";\n    import { truncate } from \"~/src/helpers/Utility.js\";\n    import { log } from \"../../../helpers/Utility\";\n\n    export let options = []; //- {value, label, icon || img}\n    export let value = \"\"; //- the currently selected uuid\n    export let disabled = false;\n    export let handler = void 0;\n    export let shrinkIfNoIcon = true;\n    export let placeHolder = false;\n    export let id = void 0;\n    export let noImg = false;\n    export let truncateWidth = 20;\n\n    let isOpen = false;\n\n    export let handleSelect = (option) => {\n      if (handler) {\n        if (handler(option.value)) {\n          value = option.value;\n        }\n      } else {\n        console.warn('You need to pass a click handler in')\n      }\n      toggleDropdown();\n    };\n\n    function toggleDropdown() {\n      isOpen = !isOpen;\n    }\n\n    function handleKeydown(event) {\n      if (event.key === 'Enter' || event.key === ' ') {\n        event.preventDefault();\n        if (event.currentTarget.getAttribute('role') === 'option') {\n          this.handleSelect(event.currentTarget.option);\n        } else {\n          this.toggleDropdown();\n        }\n      }\n    }\n\n    function isClickOutsideContainer(event, containerElement) {\n      const targetElement = event.target;\n\n      // Check if the target element is the container itself\n      if (targetElement === containerElement) {\n        return false;\n      }\n\n      // Check if the target element is inside the container\n      return !containerElement.contains(targetElement);\n    }\n\n    function handleClickOutside(event) {\n      const isClickOutside = isClickOutsideContainer(event, document.getElementById(id));\n      if(isClickOutside) {\n        isOpen = false;\n      }\n    }\n\n    onMount(() => {\n      window.addEventListener(\"click\", handleClickOutside);\n    });\n    onDestroy(() => {\n      window.removeEventListener(\"click\", handleClickOutside);\n    });\n\n    let textOnly = (option) => {\n      return option.icon || option.img ? false : true;\n    }\n\n    \n  </script>\n\n<template lang=\"pug\">\ndiv.custom-select({...$$restProps} {id} role=\"combobox\" aria-expanded=\"{isOpen}\" aria-haspopup=\"listbox\" aria-controls=\"options-list\" tabindex=\"0\")\n  div.selected-option(on:click=\"{toggleDropdown}\" on:keydown=\"{handleKeydown}\" role=\"button\" aria-expanded=\"{isOpen}\" aria-haspopup=\"listbox\" tabindex=\"0\" class:selected=\"{isOpen}\")\n    +if(\"placeHolder && !value\")\n      div.placeholder {placeHolder}\n    +each(\"options as option, index\")\n      +if(\"option && option?.value === value\")\n        +if(\"!noImg && !textOnly(option) && shrinkIfNoIcon\")\n          div.option-icon(class=\"{option.img ? option.img : ''}\")\n            +if(\"option.icon != undefined\")\n              i(class=\"{option.icon}\")\n              +else\n                img(src=\"{option.img}\" alt=\"{option.label}\")\n        div.option-label {truncate(option.label, truncateWidth)}\n    div.chevron-icon\n      i(class=\"fas fa-chevron-down\")\n\n  +if(\"isOpen\")\n    div.options-dropdown.dropshadow(id=\"options-list\" role=\"listbox\")\n      +each(\"options as option, index\")\n        +if(\"option && option?.value !== value\")\n          div.option(role=\"option\"  on:click=\"{handleSelect(option)}\" on:keydown=\"{handleKeydown}\" tabindex=\"0\")\n            +if(\"!textOnly(option) && shrinkIfNoIcon\")\n              div.option-icon(class=\"{option.img ? option.img : ''}\")\n                +if(\"option.icon != undefined\")\n                  i(class=\"{option.icon}\")\n                  +else\n                    img(src=\"{option.img}\" alt=\"{option.label}\")\n            div.option-label {option.label}\n</template>\n\n<style lang=\"scss\">\n  .custom-select {\n    position: relative;\n    display: inline-block;\n  }\n\n  .selected-option {\n    display: flex;\n    align-items: left;\n    padding: 0.35rem 1.75rem 0.35rem 0.15rem;\n    font-size: 0.875rem;\n    font-weight: 400;\n    color: #212529;\n    background-color: #fff;\n    border: 1px solid #ced4da;\n    border-radius: 0.25rem;\n    cursor: pointer;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    position: relative;\n  }\n\n  img {\n    position: absolute;\n    top: -3px;\n    left: 0;\n    width: 24px;\n    height: 24px;\n    vertical-align: middle;\n  }\n\n  .selected-option:selected {\n    border-color: #80bdff;\n  }\n\n  .option-icon {\n    position: relative;\n    min-width: 24px;\n    margin-right: 8px;\n  }\n\n  .option-label {\n    flex-grow: 1;\n    text-align: left;\n  }\n\n  .chevron-icon {\n    position: absolute;\n    right: 0.5rem;\n  }\n\n  .options-dropdown {\n    position: absolute;\n    top: calc(100% + 4px);\n    left: 0;\n    width: 100%;\n    background-color: #fff;\n    border: 1px solid #ced4da;\n    border-radius: 0.25rem;\n    overflow: hidden;\n    z-index: 999;\n  }\n\n  .option {\n    display: flex;\n    align-items: left;\n    padding: 4px;\n    font-size: 0.875rem;\n    font-weight: 400;\n    line-height: 1.5;\n    color: #212529;\n    cursor: pointer;\n\n\n    &:hover {\n      background-color: var(--select-option-highlight-color);\n    }\n    \n  }\n\n</style>\n"],"names":["ctx"],"mappings":"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"}