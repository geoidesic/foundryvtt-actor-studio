{"version":3,"file":"StartingEquipment-B-EfpCdB.js","sources":["../src/components/molecules/dnd5e/StartingGold.svelte","../src/components/atoms/button/IconButton.svelte","../src/components/molecules/dnd5e/StartingEquipment.svelte"],"sourcesContent":["<script>\n  import { localize } from \"#runtime/svelte/helper\";\n  import { getContext, onDestroy, onMount } from \"svelte\";\n  import { goldRoll } from \"~/src/stores/storeDefinitions\";\n  import { MODULE_ID } from \"~/src/helpers/constants\";\n  import { writable } from 'svelte/store';\n\n  export let characterClass;\n  export let disabled = false;\n\n  let formula = \"\";\n\n  $: {\n    if (characterClass?.system?.wealth) {\n      formula = characterClass.system.wealth;\n      // If formula doesn't contain 'd', set goldRoll directly\n      if (!formula.includes('d')) {\n        $goldRoll = parseInt(formula) || 0;\n      }\n    } else {\n      // Use default gold dice from settings if no class-specific formula\n      formula = game.settings.get(MODULE_ID, \"defaultGoldDice\") || \"5d4 * 10\";\n    }\n  }\n\n  // Derive hasRolled from the goldRoll store value\n  $: hasRolled = $goldRoll > 0;\n\n  async function rollGold() {\n    if (disabled) return;\n    const roll = await new Roll(formula).evaluate();\n    const className = characterClass?.name || \"Character\";\n    const flavor = `Rolling starting gold for ${className}`;\n    roll.toMessage({\n      flavor,\n      speaker: ChatMessage.getSpeaker()\n    }, {rollMode: game.settings.get('core', 'rollMode')});\n\n    $goldRoll = roll.total;\n  }\n\n  export function resetGoldRoll() {\n    goldRoll.set(0);\n  }\n</script>\n\n<template lang=\"pug\">\n  section.starting-gold\n    .flexrow\n      +if(\"!disabled\")\n        .flex0.required(class=\"{!hasRolled ? 'active' : ''}\") *\n      .flex3\n        h2.left {localize('GAS.Equipment.Gold')}\n    \n    .flexcol.gold-section.gap-10(class=\"{disabled ? 'disabled' : ''}\")\n      +if(\"!hasRolled\")\n        .flexrow.left.gap-4\n          .flex1 Formula: \n          .flex1.badge.center {formula}\n      +if(\"!disabled\")\n        .flexrow.left.justify-flexrow-vertical\n          .flex3 \n            +if(\"hasRolled\")\n              .result\n                span.label.gold Result: \n                span.value {$goldRoll} gp\n          .flex0.right.controls(class=\"{hasRolled || disabled ? '' : 'active'}\" alt=\"Roll\" on:click!=\"{rollGold}\")\n            i.fas.fa-dice\n</template>\n\n<style lang=\"sass\">\n  @import \"../../../../styles/Mixins.scss\"\n  .badge\n    +badge()\n  .starting-gold\n    background: rgba(0, 0, 0, 0.2)\n    border-radius: var(--border-radius)\n    padding: 0.5rem\n\n  .gold-section\n    padding: 0.5rem\n    border-radius: var(--border-radius)\n    &:not(.disabled)\n      border: 1px solid var(--dnd5e-color-gold)\n      background: rgba(0, 0, 0, 0.2)\n      background: #000000\n      color: var(--dnd5e-color-gold)\n\n\n  .formula\n    .label\n      color: var(--color-text-dark-secondary)\n      margin-right: 0.5rem\n    .value\n      font-family: monospace\n\n  .controls\n    cursor: pointer\n    min-width: 24px\n    font-size: 1rem\n    background-color: rgba(0, 0, 0, 0.1)\n    padding: 2px 1px 0px 0px\n    visibility: hidden\n    border: 1px solid var(--color-positive)\n    border-radius: 4px\n    color: var(--color-positive)\n    &:hover\n      cursor: pointer\n      background-color: rgba(140, 90, 0, 0.2)\n    &.active\n      visibility: visible\n      border: 1px solid var(--dnd5e-color-gold)\n      color: var(--dnd5e-color-gold)\n      animation: pulse 1s infinite\n\n  .result\n    .label\n      color: var(--color-text-dark-secondary)\n      margin-right: 0.5rem\n    .value\n      color: var(--color-text-highlight)\n      font-weight: bold\n</style> ","<script>\n  import preventDefault from \"~/src/helpers/svelte-actions/PreventDefault.js\";\n\n  export let icon = void 0;\n  export let disabled = false;\n</script>\n\n<button on:click on:mousedown={preventDefault} {disabled}>\n  <div><i class={icon} /></div>\n</button>\n\n<style lang=\"scss\">\n  @import \"../../../../styles/Mixins.scss\";\n  button {\n    @include icon-button;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    clip-path: var(--tjs-icon-button-clip-path, none);\n    transform-style: preserve-3d;\n  }\n\n  button:hover {\n    background: radial-gradient(var(--button-background-highlight), var(--button-background));\n    clip-path: var(--tjs-icon-button-clip-path-hover, var(--tjs-icon-button-clip-path, none));\n  }\n</style>\n","<script>\n  import { localize } from \"#runtime/svelte/helper\";\n  import { getContext, onDestroy, onMount, tick } from \"svelte\";\n  import { equipmentSelections, selectEquipment, initializeGroup, editGroup, getEquipmentIcon, selectedItems } from \"~/src/stores/equipmentSelections\";\n  import { MODULE_ID } from \"~/src/helpers/constants\";\n  import IconButton from \"~/src/components/atoms/button/IconButton.svelte\";\n  import ImageButton from \"~/src/components/atoms/button/ImageButton.svelte\";\n  // import EquipmentSelector from \"~/src/components/molecules/dnd5e/EquipmentSelector.svelte\";\n\n  export let startingEquipment = [];\n  export let disabled = false;\n  export let allEquipmentItems = [];\n\n  // Check if equipment selection is enabled in settings\n  const equipmentSelectionEnabled = game.settings.get(MODULE_ID, \"enableEquipmentSelection\");\n\n  function getGroupFromSelection(groupId) {\n    return $equipmentSelections[groupId];\n  }\n\n  $: window.GAS.log.d(\"StartingEquipment startingEquipment\", startingEquipment);\n\n  // Process and group equipment\n  $: {\n    if (startingEquipment?.length) {\n      \n      startingEquipment\n        // @deprecated: this breaks the order of the items for v4 in the flattenedStartingEquipment store\n        // .sort((a, b) => {\n        //   // First sort by whether it's a standalone entry (not OR and no group)\n        //   if (a.type !== 'OR' && !a.group && (b.type === 'OR' || b.group)) return -1;\n        //   if (b.type !== 'OR' && !b.group && (a.type === 'OR' || a.group)) return 1;\n        //   // Then by sort value\n        // })\n        .forEach(entry => {\n          // window.GAS.log.d(\"StartingEquipment entry\", entry);\n          if (entry.type === 'OR') {\n            initializeGroup(entry._id, {\n              type: 'choice',\n              label: 'Choose one...',\n              items: startingEquipment.filter(item => item.group === entry._id),\n              sort: entry.sort\n            });\n          } else if (!entry.group) {\n            initializeGroup(entry._id || 'standalone', {\n              type: 'standalone',\n              label: entry.label,\n              items: [entry],\n              sort: entry.sort\n            });\n          }\n        });\n    }\n  }\n\n  // Sort groups by their sort value\n  $: sortedGroups = Object.values($equipmentSelections)\n    // .sort((a, b) => (a.sort || 0) - (b.sort || 0));\n\n\n  // Group items by type for specialized handling\n  $: groupedByType = sortedGroups.reduce((acc, group) => {\n    // window.GAS.log.d(\"StartingEquipment groupedByType group\", group);\n    const itemTypes = group.items.map(item => item.type);\n    if (itemTypes.includes('focus')) {\n      if (!acc.focus) acc.focus = [];\n      acc.focus.push(group);\n    } else if (itemTypes.includes('weapon')) {\n      if (!acc.weapon) acc.weapon = [];\n      acc.weapon.push(group);\n    } else if (itemTypes.includes('armor')) {\n      if (!acc.armor) acc.armor = [];\n      acc.armor.push(group);\n    } else if (itemTypes.includes('tool')) {\n      if (!acc.tool) acc.tool = [];\n      acc.tool.push(group);\n    } else {\n      if (!acc.standard) acc.standard = [];\n      acc.standard.push(group);\n    }\n    return acc;\n  }, {});\n\n\n\n  // $: window.GAS.log.d(\"StartingEquipment equipmentSelections\", $equipmentSelections);\n  // $: window.GAS.log.d(\"StartingEquipment sortedGroups\", sortedGroups);\n  // $: window.GAS.log.d(\"StartingEquipment groupedByType\", groupedByType);\n  // $: window.GAS.log.d('$equipmentSelections', $equipmentSelections);\n\n\n  function handleSelection(groupId, item) {\n    window.GAS.log.d('[StartingEquipment] handleSelection ENTRY', {\n      groupId,\n      itemDetails: {\n        id: item?._id,\n        type: item?.type,\n        label: item?.label\n      },\n      groupState: {\n        type: $equipmentSelections[groupId]?.type,\n        inProgress: $equipmentSelections[groupId]?.inProgress,\n        completed: $equipmentSelections[groupId]?.completed,\n        selectedItem: $equipmentSelections[groupId]?.selectedItem,\n        items: $equipmentSelections[groupId]?.items?.map(i => ({\n          id: i._id,\n          type: i.type,\n          isAND: i.type === 'AND'\n        }))\n      }\n    });\n    \n    if (disabled) return;\n    \n    const group = $equipmentSelections[groupId];\n    \n    window.GAS.log.d('[StartingEquipment] Group evaluation', {\n      isStandalone: group?.type === 'standalone',\n      hasItems: !!group?.items?.length,\n      firstItemType: group?.items?.[0]?.type,\n      isFirstItemAND: group?.items?.[0]?.type === 'AND',\n      isChoiceGroup: group?.type === 'choice'\n    });\n\n    // For standalone groups with AND items\n    if (group?.type === 'standalone' && group.items[0]?.type === 'AND') {\n      window.GAS.log.d('[StartingEquipment] Handling standalone AND group', {\n        andItemDetails: {\n          id: group.items[0]._id,\n          children: group.items[0].children?.map(c => ({\n            id: c._id,\n            type: c.type,\n            label: c.label\n          }))\n        },\n        currentGranularSelections: group.granularSelections\n      });\n      selectEquipment(groupId, group.items[0]._id);\n    } \n    // For choice groups\n    else if (group?.type === 'choice') {\n      window.GAS.log.d('[StartingEquipment] Handling choice group', {\n        groupId,\n        selectedItemId: item._id,\n        selectedItemType: item.type,\n        isSelectedItemAND: item.type === 'AND',\n        groupItems: group.items.map(i => ({\n          id: i._id,\n          type: i.type\n        }))\n      });\n      selectEquipment(groupId, item._id);\n    }\n  }\n\n  function handleEditGroup(groupId) {\n    // window.GAS.log.d(\"[Starting Equipment] editGroup\", { groupId });\n    editGroup(groupId);\n  }\n\n  onMount(async () => {\n    // window.GAS.log.d(\"StartingEquipment\", startingEquipment);\n  });\n\n  function isOptionDisabled(group, item) {\n    return disabled || (group.inProgress && group.selectedItemId && group.selectedItemId !== item._id);\n  }\n\n  function getOptionClasses(group, item) {\n    const classes = [];\n    if (group.selectedItemId === item._id) classes.push('selected');\n    if (isOptionDisabled(group, item)) classes.push('disabled');\n    if (group.completed) classes.push('completed');\n    return classes.join(' ');\n  }\n\n  function isGroupNonEditable(group) {\n    // Check if it's a standalone group and all items are linked type\n    return group.type === 'standalone' && group.items.every(item => {\n      if (item.type === 'linked') return true;\n      if (item.type === 'AND') {\n        return item.children.every(child => child.type === 'linked');\n      }\n      return false;\n    });\n  }\n\n</script>\n\n<template lang=\"pug\">\n  +if(\"startingEquipment?.length\")\n    section.starting-equipment\n      .flexrow\n        +if(\"!disabled\")\n          .flex0.required(class=\"{equipmentSelectionEnabled ? 'active' : ''}\") *\n        .flex3\n          h2.left {localize('GAS.Equipment.Label')}\n      \n      //- Process each group\n      +each(\"sortedGroups as group\")\n        +if(\"group.completed || group.inProgress\")\n          .equipment-group(class=\"{group.inProgress ? 'in-progress' : ''}\")\n            .flexrow.justify-flexrow-vertical.no-wrap\n              .flex3.left\n                +if(\"group.type === 'choice'\")\n                  +if(\"group.completed\")\n                    span.group-label Completed:\n                    +else()\n                      span.group-label Choose one...\n              +if(\"!group.inProgress && !isGroupNonEditable(group)\")\n                .flex0.right\n                  IconButton.option(\n                    on:click=\"{handleEditGroup(group.id)}\"\n                    disabled=\"{disabled}\"\n                    icon=\"fas fa-pencil\"\n                  )\n            .options\n              +if(\"group.type === 'standalone' && group.inProgress\")\n                .equipment-group\n                  .flexrow.justify-flexrow-vertical.no-wrap\n                    .flex3.left\n                      +if(\"!group.completed\")\n                        span.group-label All of the following:\n                  +if(\"group.items[0].type === 'AND'\")\n                    +each(\"group.items[0].children as item\")\n                      .equipment-item.option(\n                        class=\"{item.type === 'linked' ? 'selected' : ''} {item.type === 'focus' ? 'focus' : ''} {disabled ? 'disabled' : ''}\"\n                        on:click!=\"{item.type !== 'linked' ? handleSelection(group.id, item) : null}\"\n                      )\n                        .flexrow.justify-flexrow-vertical.no-wrap\n                          .flex0.relative.icon\n                            img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                          .flex2.left.name.black-link\n                            span {@html item.label}\n                    +else()\n                      +each(\"group.items as item\")\n                        .equipment-item.option(\n                          class=\"{item.type === 'linked' ? 'selected' : ''} {item.type === 'focus' ? 'focus' : ''} {disabled ? 'disabled' : ''}\"\n                          on:click!=\"{item.type !== 'linked' ? handleSelection(group.id, item) : null}\"\n                        )\n                          .flexrow.justify-flexrow-vertical.no-wrap\n                            .flex0.relative.icon\n                              img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                            .flex2.left.name.black-link\n                              span {@html item.label}\n                +else()\n                  +each(\"group.items as item\")\n                    button.option(\n                      class=\"{getOptionClasses(group, item)}\"\n                      on:click!=\"{handleSelection(group.id, item)}\"\n                      disabled=\"{isOptionDisabled(group, item)}\"\n                    )\n                      .flexrow.justify-flexrow-vertical.no-wrap\n                        .flex0.relative.icon\n                          img.icon(src=\"{getEquipmentIcon(item.type, group)}\" alt=\"{item.type}\")\n                        .flex2.left.name.black-link\n                          span {@html item.label}\n                          +if(\"group.selectedItemId === item._id && $selectedItems[group.id]\")\n                            span.selected-name &nbsp;({$selectedItems[group.id].name})\n\n</template>\n\n<style lang=\"sass\">\n.starting-equipment\n  background: rgba(0, 0, 0, 0.2)\n  border-radius: var(--border-radius)\n  padding: 0.5rem\n  margin-top: 1rem\n\n.section-header\n  font-size: 1.2em\n  font-weight: bold\n  margin-bottom: 1rem\n  color: var(--color-text-highlight)\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1)\n  padding-bottom: 0.5rem\n\n.equipment-group\n  margin-bottom: 0.75rem\n  margin-right: 0.2rem\n  padding: 0.5rem\n  border-radius: var(--border-radius)\n  background: rgba(0, 0, 0, 0.1)\n  \n  &:last-child\n    margin-bottom: 0\n\n  &.in-progress\n    box-shadow: 0px 0px 15px var(--color-highlight)\n    border: 1px solid var(--dnd5e-color-gold)\n    .option.selected\n      background: rgba(0, 90, 0, 0.8)\n\n\n  .group-label\n    display: block\n    font-size: 1em\n    color: var(--color-text-dark-secondary)\n    margin-bottom: 0.5rem\n    font-style: italic\n\n  .options\n    display: grid\n    grid-template-columns: repeat(1, 1fr)\n    gap: 0.2rem\n\n  .option, .equipment-item\n    display: flex\n    padding: 0.3rem 0.5rem\n    border: 1px solid rgba(255, 255, 255, 0.1)\n    border-radius: 4px\n    background: rgba(0, 0, 0, 0.4)\n    color: var(--li-background-color)\n    transition: all 0.2s ease\n\n  .option\n    cursor: pointer\n    \n    &:hover:not(.disabled, .selected, .completed)\n      background: rgba(0, 0, 0, 0.6)\n      border-color: rgba(255, 255, 255, 0.2)\n\n    &.selected\n      border-color: #b59e54\n      box-shadow: 0 0 10px rgba(181, 158, 84, 0.2)\n      background: rgba(0, 90, 0, 0.4)\n\n\n    &.completed\n      cursor: auto\n      &:hover\n        box-shadow: none\n\n    &.disabled\n      cursor: auto\n      &:not(.completed)\n        opacity: 0.7\n\n      &:hover\n        box-shadow: none\n    \n\n.equipment-item\n  margin-bottom: 0.5rem\n  \n  &.focus\n    border-left: 3px solid var(--color-text-highlight)\n\n\n.icon\n  filter: brightness(1) drop-shadow(0 2px 3px rgba(0, 0, 0, 0.5))\n  border: none\n  min-width: 32px\n  max-height: 32px\n  margin-right: 0.2rem\n  width: 90%\n  height: 90%\n  object-fit: cover\n  object-position: center\n\n.name\n  font-size: smaller\n  line-height: 0.8rem\n\n.count\n  margin-left: 0.75rem\n  color: var(--color-text-dark-secondary)\n  font-size: 0.9em\n</style> "],"names":["ctx","create_if_block_1","create_if_block_3","create_if_block_2","create_if_block"],"mappings":"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"}