{"version":3,"file":"ManualEntry-DFpETKVv.js","sources":["../src/components/molecules/dnd5e/AbilityEntry/ManualEntry.svelte"],"sourcesContent":["<script>\n  import { Timing } from \"@typhonjs-fvtt/runtime/util\";\n  import { createEventDispatcher, getContext, onDestroy, onMount, tick  } from \"svelte\";\n  import { abilities, race } from \"~/src/stores/index\"\n  \n  export let document = false;\n  \n  const dispatch = createEventDispatcher();\n  const doc = document || getContext(\"#doc\");\n  const updateDebounce = Timing.debounce(updateValue, 300);\n\n  function updateValue(attr, event) {\n    const options = {system: {abilities: { [attr]: {value: Number(event.target.value)}}}};\n    $doc.updateSource(options)\n    $doc = $doc\n  }\n\n  $: systemAbilities = game.system.config.abilities\n  $: systemAbilitiesArray = Object.entries(systemAbilities);\n  $: raceFeatScore = 0;\n  $: abilityAdvancements = $race?.advancement?.byType?.AbilityScoreImprovement?.[0].configuration?.fixed\n\n  onMount(async () => {\n  });\n</script>\n\n<template lang=\"pug\">\n.attribute-entry.mt-sm\n  table\n    thead\n      tr\n        th.ability Ability\n        th.center Race / Feat\n        th.center Base Score\n        th.center Score\n        th.center Modifier\n    tbody\n      +each(\"systemAbilitiesArray as ability, index\")\n        tr\n          td.ability {ability[1].label}\n          td.center\n            +if(\"abilityAdvancements?.[ability[1].abbreviation] > 0\")\n              span +\n            span {abilityAdvancements?.[ability[1].abbreviation] || 0}\n          td.center\n            input.center.small(name=\"{ability[1].abbreviation}\" id=\"{ability[1].abbreviation}\" type=\"number\" value=\"{$doc.system.abilities[ability[1].abbreviation]?.value}\" on:input!=\"{updateDebounce(ability[1].abbreviation, event)}\")\n          td.center {(Number(abilityAdvancements?.[ability[1].abbreviation]) || 0) + Number($doc.system.abilities[ability[1].abbreviation]?.value || 0)}\n          td.center\n            +if(\"$doc.system.abilities[ability[1].abbreviation]?.mod > 0\")\n              span +\n            span {$doc.system.abilities[ability[1].abbreviation]?.mod}\n</template>\n\n<style lang=\"sass\">\n  table\n    width: 100%\n    border-collapse: separate\n    border-spacing: 0 0.5rem\n   \n  th\n    padding: 0.1rem 0.5rem\n    text-align: left\n    font-family: var(--dnd5e-font-modesto)\n    &.center\n      text-align: center\n    &.ability\n      width: 25%\n   \n  td\n    text-align: left\n    &.center\n      text-align: center\n    &.ability\n      width: 25%\n</style>"],"names":["ctx","attr","event"],"mappings":"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"}